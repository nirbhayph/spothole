(this.webpackJsonpspothole=this.webpackJsonpspothole||[]).push([[0],{324:function(e,t,a){e.exports=a(575)},329:function(e,t,a){},379:function(e,t,a){},575:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),i=a.n(r),l=(a(329),a(12)),c=a(13),s=a(15),m=a(14),p=a(16),u="53865530561-eoook3l9t27uvkec6561d3aolde6mims.apps.googleusercontent.com",d="AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ",g="https://spothole.ml:5000",h="https://nirbhay.me/spothole/UALogin",f=g+"/api/user/validate",b=a(41),E=a(65),y=a(142),v=a.n(y),x=(a(330),a(621)),S=a(5),C=a(144),k=a(95),O=a(256),w=a.n(O),j=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleTakePhoto",value:function(e){console.log("takePhoto")}},{key:"handleTakePhotoAnimationDone",value:function(e){console.log("takePhoto",e)}},{key:"handleCameraError",value:function(e){console.log("handleCameraError",e)}},{key:"handleCameraStart",value:function(e){console.log("handleCameraStart")}},{key:"handleCameraStop",value:function(){console.log("handleCameraStop")}},{key:"render",value:function(){var e=this;return o.a.createElement(C.a,{variant:"outlined",style:{width:"80%",marginLeft:"10%",marginTop:"150px"}},o.a.createElement(x.a,{color:"secondary",variant:"contained",style:{zIndex:1,float:"right",marginBottom:"10px",marginRight:"10px",marginTop:"10px"},onClick:function(){return e.props.cameraClosed()}},"Close Camera \xa0",o.a.createElement(w.a,null)),o.a.createElement(v.a,{onTakePhoto:function(t){e.props.onCapture(t)},onTakePhotoAnimationDone:function(t){e.handleTakePhotoAnimationDone(t)},onCameraError:function(t){e.handleCameraError(t)},idealFacingMode:y.FACING_MODES.ENVIRONMENT,idealResolution:{width:600,height:480},imageType:y.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!0,isImageMirror:!1,isSilentMode:!1,isDisplayStartCameraError:!0,isFullscreen:!1,sizeFactor:1,onCameraStart:function(t){e.handleCameraStart(t)},onCameraStop:function(){e.handleCameraStop()}}),o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p",style:{marginTop:"-5px",textAlign:"center",fontSize:"18px",backgroundColor:"#2997f7",color:"white"}},o.a.createElement("b",null,"Click a Picture with a Pothole to get started!")))}}]),t}(o.a.Component),L=Object(S.a)((function(e){return{root:{flexGrow:1,marginTop:"60px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"480px",marginRight:"10px",marginLeft:"10px"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(j),I=a(177),R=(a(335),a(257)),T=a.n(R),D=a(258),B=a.n(D),N=(a(336),a(259)),F=a.n(N),A=a(260),P=a.n(A);Object(I.registerPlugin)(T.a,B.a,F.a,P.a);var U=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleInit",value:function(){this.props.updateFilePondRef(this.pond)}},{key:"loaded",value:function(e){var t=JSON.parse(e).filename[0];this.props.validation(t)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:"App",style:{marginTop:"100px",marginLeft:"20px",marginRight:"20px",display:this.props.display}},o.a.createElement(C.a,{variant:"outlined",className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(I.FilePond,{ref:function(t){return e.pond=t},acceptedFileTypes:["image/png","image/jpg","image/jpeg"],labelIdle:this.props.label,allowMultiple:!1,oninit:function(){return e.handleInit()},maxFileSize:"10MB",allowFileSizeValidation:!0,server:{process:{url:"https://spothole.ml:5000/api/upload",onload:function(t){return e.loaded(t)}}}}))))}}]),t}(o.a.Component),M=Object(S.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"500px",marginRight:"10px",marginLeft:"10px",maxWidth:"60%",position:"relative",top:"50%",transform:"translate(32%, 20%)"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(U),W=a(21),z=a.n(W),_=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(s.a)(this,Object(m.a)(t).call(this,e)),z.a.post("https://spothole.ml:5000/api/detect/single",{image_url:e.imageURL}).then((function(t){e.validationCompleted(t)})).catch((function(e){console.info("Unable to validate image!")})),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(o.a.Component),q=a(49),G=a(651),V=a(655),Y=a(266),H=a.n(Y),J=a(626),X=a(622),Z=a(261),K=a.n(Z),$=a(262),Q=a.n($),ee=a(657),te=a(139),ae=a.n(te);var ne={current:null},oe=Object(X.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)},textInput:{marginBottom:"10px"},labelText:{marginTop:"25px",marginBottom:"10px"},buttonCurrentLocation:{marginBottom:"15px"}}}));function re(e){var t=oe(),a=o.a.useState(""),n=Object(q.a)(a,2),r=n[0],i=n[1],l=o.a.useState([]),c=Object(q.a)(l,2),s=c[0],m=c[1],p=o.a.useState(!1),u=Object(q.a)(p,2),g=u[0],h=u[1],f=o.a.useState(""),b=Object(q.a)(f,1)[0],E=o.a.useState(""),y=Object(q.a)(E,1)[0],v=o.a.useRef(!1);"undefined"===typeof window||v.current||(document.querySelector("#google-maps")||function(e,t,a){if(t){var n=document.createElement("script");n.setAttribute("async",""),n.setAttribute("id",a),n.src=e,t.appendChild(n)}}("https://maps.googleapis.com/maps/api/js?key="+d+"&libraries=places",document.querySelector("head"),"google-maps"),v.current=!0);var x=function(t){i(t.target.value),""!==t.target.value.trim()?h(!1):h(!0),console.info("The field is now required",g),""===t.target.value.trim()&&void 0===e.currentLocationOptional&&e.updateLocation(b)},S=o.a.useMemo((function(){return Q()((function(e,t){ne.current.getPlacePredictions(e,t)}),200)}),[]);o.a.useEffect((function(){var e=!0;if(!ne.current&&window.google&&(ne.current=new window.google.maps.places.AutocompleteService),ne.current){if(""!==r)return S({input:r},(function(t){e&&m(t||[])})),function(){e=!1};m([])}}),[r,S]);return o.a.createElement("div",null,o.a.createElement(k.a,{gutterBottom:!0,className:t.labelText},e.label||"Tag Pothole's Location"),o.a.createElement(V.a,{id:"google-map-demo",getOptionLabel:function(e){return"string"===typeof e?e:e.description},filterOptions:function(e){return e},options:s,autoComplete:!0,includeInputInList:!0,disableOpenOnFocus:!0,fullWidth:!0,onChange:function(t,a){try{z.a.get("https://maps.googleapis.com/maps/api/geocode/json?place_id="+a.place_id+"&key="+d).then((function(t){e.updateLocation(a.description,t.data.results[0].geometry.location)}))}catch(n){e.updateLocation(b,y)}},renderInput:function(e){return o.a.createElement(G.a,Object.assign({},e,{label:"Add a location",variant:"outlined",fullWidth:!0,className:t.textInput,onChange:x}))},renderOption:function(e){var a=e.structured_formatting.main_text_matched_substrings,n=K()(e.structured_formatting.main_text,a.map((function(e){return[e.offset,e.offset+e.length]})));return o.a.createElement(J.a,{container:!0,alignItems:"center"},o.a.createElement(J.a,{item:!0},o.a.createElement(H.a,{className:t.icon})),o.a.createElement(J.a,{item:!0,xs:!0},n.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})),o.a.createElement(k.a,{variant:"body2",color:"textSecondary"},e.structured_formatting.secondary_text)))}}),void 0===e.currentLocationOptional&&o.a.createElement("div",null," ",o.a.createElement("h5",{style:{color:"white",textAlign:"center",fontWeight:"bold"}},"OR"),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("i",null,"(Will Use Current Location Instead)")),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(ee.a,{style:{marginBottom:"25px",marginTop:"7px"},icon:o.a.createElement(ae.a,null),label:e.permissionLocationValue,variant:"outlined",color:"primary"}))," "))}var ie,le,ce=a(658),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={value:5},a.handleChange=function(e,t){a.setState({value:t}),a.props.updateSeverity(t)},e.updateSeverity(a.state.value),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return o.a.createElement("div",{className:e.root},o.a.createElement(k.a,{gutterBottom:!0},"Severity Rate ",o.a.createElement("i",null,"(Choose a value between 0-10)")),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(ce.a,{classes:{container:e.slider},value:t,min:1,max:10,step:1,onChange:this.handleChange,valueLabelDisplay:"on"}))}}]),t}(o.a.Component),me=Object(S.a)({root:{width:"100%"},slider:{padding:"22px 0px"}})(se),pe=a(632),ue=a(635),de=a(634),ge=a(633),he=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).makeEmpty=function(){a.setState({content:""}),a.checkRequired(a.textFieldRef.current,"required")},a.checkRequired=function(e,t){var n=e.value.trim();""!==n?a.setState({errorRequired:!1,content:e.value}):a.setState({errorRequired:void 0===t,content:e.value}),a.props.updateDescription(n)},a.state={errorRequired:!1,content:""},a.textFieldRef=o.a.createRef(),e.passMakeEmpty(a.makeEmpty),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(k.a,{style:{marginBottom:"10px",marginTop:"5px"},gutterBottom:!0},"Add Comment"),o.a.createElement(G.a,{inputRef:this.textFieldRef,error:this.state.errorRequired,onChange:function(t){return e.checkRequired(t.target)},required:!0,fullWidth:!0,variant:"outlined",placeholder:"Supporting comments on the report",multiline:!0,rows:4,rowsMax:50,label:"Additional Comments (Required)",value:this.state.content}))}}]),t}(o.a.Component),fe=a(627),be=a(631),Ee=a(629),ye=a(630),ve=a(628),xe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).handleClose=function(){void 0!==a.props.linkTo&&(window.location.href="/spothole/#"+a.props.linkTo,window.location.reload()),a.props.updateCloseDialogState()},a.justClose=function(){a.props.updateCloseDialogState()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(fe.a,{open:this.props.dialogOpenState,onClose:function(){return e.justClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ve.a,{id:"alert-dialog-title"},this.props.title),o.a.createElement(Ee.a,null,o.a.createElement(ye.a,{id:"alert-dialog-description"},this.props.content)),o.a.createElement(be.a,null,o.a.createElement(x.a,{onClick:function(){return e.handleClose()},color:this.props.color,autoFocus:!0},this.props.buttonText),void 0!==this.props.linkTo&&o.a.createElement(x.a,{onClick:function(){return e.justClose()},color:"primary",autoFocus:!0},"No"))))}}]),t}(o.a.Component),Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).setLocation=function(e,t){a.state.location!==e&&ie.setState({location:e,locationLatLng:t})},a.setPermissionBasedLocation=function(e,t){a.state.location!==e&&ie.setState({permissionLocation:e,permissionLocationLatLng:t})},a.showPosition=function(e){z.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.coords.latitude+","+e.coords.longitude+"&key="+d).then((function(e){a.setPermissionBasedLocation(e.data.results[0].formatted_address,e.data.results[0].geometry.location)}),(function(e){console.info("Cannot update current location")}))},a.getLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a.showPosition):console.info("Geolocation is not supported by this browser.")},a.setSeverity=function(e){ie.setState({severity:e})},a.setDescription=function(e){ie.setState({description:e})},a.updateCloseDialogState=function(){ie.setState({dialogOpenState:!1})},a.updateCancelDialogState=function(){ie.setState({cancelDialogOpenState:!1})},a.submitForm=function(){var e,t;""===a.state.location&&""===a.state.permissionLocation?e="":""!==a.state.location?(e=a.state.location,t=a.state.locationLatLng):(e=a.state.permissionLocation,t=a.state.permissionLocationLatLng),""===a.state.description||""===e||""===a.state.severity?a.setState({dialogOpenState:!0}):(a.setState({dialogOpenState:!1}),z.a.post("https://spothole.ml:5000/api/submit/report",{data:{description:a.state.description,location:e,locationLatLng:t,imageURL:a.state.imageURL,userId:a.state.userId,severity:a.state.severity}}).then((function(e){a.setState({showSubmittedFeedback:!0})}),(function(e){console.info("Problem with submitting your report")})))},a.makeEmpty=function(e){ie.setState({makeBoxEmptyFunction:e})},a.showCancelAlert=function(){ie.setState({cancelDialogOpenState:!0})},a.navigateToNewReport=function(){window.location.reload()},a.state={imageURL:e.reportData.split(" : ")[0],location:"",severity:"",description:"",dialogOpenState:!1,cancelDialogOpenState:!1,locationLatLng:"",makeBoxEmptyFunction:"",showSubmittedFeedback:!1,permissionLocation:"",permissionLocationLatLng:"",userId:e.userId},ie=Object(E.a)(a),a.getLocation(),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",null,!this.state.showSubmittedFeedback&&"Your image is valid!"===this.props.reportData.split(" : ")[1]&&o.a.createElement("div",null,o.a.createElement(pe.a,{className:t.root},o.a.createElement(ge.a,{component:"img",alt:"Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Validated Pothole Image"}),o.a.createElement(de.a,null,o.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Create Report"),o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p"},"We were able to identify one or more potholes in the image you provided. Please fill the rest of the details to file an official complaint. Once you create a report and it gets approved you cannot cancel the request made until resolved by the the concerned authority. Don't forget to add supporting comments to your report."),o.a.createElement(re,{updateLocation:this.setLocation,permissionLocationValue:this.state.permissionLocation}),o.a.createElement(me,{updateSeverity:this.setSeverity}),o.a.createElement(he,{passMakeEmpty:this.makeEmpty,updateDescription:this.setDescription})),o.a.createElement(ue.a,null,o.a.createElement(x.a,{size:"small",color:"primary",onClick:function(){return e.submitForm()}},"Submit"),o.a.createElement(x.a,{size:"small",color:"secondary",onClick:function(){return e.showCancelAlert()}},"Cancel"))),o.a.createElement(xe,{dialogOpenState:this.state.cancelDialogOpenState,updateCloseDialogState:this.updateCancelDialogState,title:"Cancel Reporting!",content:"Are you sure you want to cancel?",buttonText:"Yes, Cancel Report",linkTo:"/report",color:"secondary"}),o.a.createElement(xe,{dialogOpenState:this.state.dialogOpenState,updateCloseDialogState:this.updateCloseDialogState,title:"Required Fields Validation",content:"One or more required fields are empty!",buttonText:"OK",color:"primary"})),!("Your image is valid!"===this.props.reportData.split(" : ")[1])&&o.a.createElement("div",null,o.a.createElement(pe.a,{className:t.root},o.a.createElement(ge.a,{component:"img",alt:"Not Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Not Validated Pothole Image"}),o.a.createElement(de.a,null,o.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Seems Like an Invalid Image"),o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p"},"There does not seem to be a pothole in this image. Please retry with a different image. If you feel you have uploaded a correct image feel free to email us at"," ",o.a.createElement("a",{href:"mailto:contact.spothole@gmail.com"},"contact.spothole@gmail.com"))),o.a.createElement(ue.a,{style:{marginTop:"10px"}},o.a.createElement(x.a,{size:"small",color:"primary",onClick:function(){return e.navigateToNewReport()}},"Retry"),o.a.createElement(b.b,{to:"/dashboard"},o.a.createElement(x.a,{size:"small",color:"primary"},"Go to My Complaints"))))),this.state.showSubmittedFeedback&&"Your image is valid!"===this.props.reportData.split(" : ")[1]&&o.a.createElement("div",null,o.a.createElement(pe.a,{className:t.root},o.a.createElement(ge.a,{component:"img",alt:"Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Validated Pothole Image"}),o.a.createElement(de.a,null,o.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Complaint Registered!"),o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p"},"Thank you for submitting the report. A concerned authority will get back to you. You can find the new report and monitor it's status in the"," ",o.a.createElement(b.b,{to:"/dashboard"},"My Complaints")," section."),o.a.createElement("br",null),o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p"},"Keep a track of your report through the comments section and feel free to exchange more thoughts with the concerned authority too. You can even email us at"," ",o.a.createElement("a",{href:"mailto:contact.spothole@gmail.com"},"contact.spothole@gmail.com")," ","for more questions.")),o.a.createElement(ue.a,{style:{marginTop:"10px"}},o.a.createElement(b.b,{to:"/dashboard"},o.a.createElement(x.a,{size:"small",color:"primary"},"Go to My Complaints"))))))}}]),t}(o.a.Component),Ce=Object(S.a)((function(e){return{root:{maxWidth:"100%",marginRight:"10%",marginLeft:"10%",marginTop:"120px",marginBottom:"30px"}}}))(Se),ke=a(269),Oe=a.n(ke),we=a(270),je=a.n(we),Le=a(268),Ie=a.n(Le),Re=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement(J.a,{container:!0,spacing:2,justify:"center"},o.a.createElement(J.a,{item:!0,xs:10,sm:10},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(k.a,{gutterBottom:!0,style:{textAlign:"center",fontSize:"2.7em"}},"Spot and Report"," ",o.a.createElement(Ie.a,{style:{fontSize:50},color:"secondary"})," Potholes Now"),o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p",style:{textAlign:"center",fontSize:"1.5em",maxWidth:"400px"}},"Choose between either uploading a photo from the file system or using the camera to click a photo."))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement(J.a,{item:!0,xs:6,sm:5},o.a.createElement(C.a,{variant:"outlined",onClick:function(){return e.props.toggleCameraComponent()},className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(Oe.a,{style:{fontSize:120}})," ",o.a.createElement("br",null)," Upload From Camera"))),o.a.createElement(J.a,{item:!0,xs:6,sm:5},o.a.createElement(C.a,{variant:"outlined",onClick:function(){return e.props.toggleUploadComponent()},className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(je.a,{style:{fontSize:120}})," ",o.a.createElement("br",null)," Upload From File Manager")))))}}]),t}(o.a.Component),Te=Object(S.a)((function(e){return{root:{flexGrow:1,marginTop:"60px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"300px",marginRight:"10px",marginLeft:"10px",borderRadius:"10px",border:"1px solid #212121"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(Re),De=a(636),Be=Object(X.a)((function(e){return{root:{width:"60%","& > * + *":{marginTop:e.spacing(2)},marginTop:"180px"}}}));function Ne(){var e=Be();return o.a.createElement(J.a,{container:!0,spacing:2,justify:"center"},o.a.createElement("div",{className:e.root},o.a.createElement(De.a,null)))}var Fe,Ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).uploadClickedFile=function(e){le.removeCameraFromView(),le.setState({enableUploadFilesComponent:o.a.createElement(M,{label:"Preview uploading of your clicked image!",display:"block",updateFilePondRef:a.updateFilePondRef,validation:a.validation}),fileDataCopy:e})},a.updateFilePondRef=function(e){le.setState({filePondRef:e}),null!==le.state.fileDataCopy&&le.state.filePondRef.addFile(le.state.fileDataCopy)},a.validation=function(e){le.setState({buttons:null,validationMessage:o.a.createElement(Ne,null),validateComponent:o.a.createElement(_,{imageURL:e,validationCompleted:a.validationCompleted})})},a.validationCompleted=function(e){le.setState({validationMessage:o.a.createElement(Ce,{userId:a.state.userId,reportData:e.data}),validateComponent:"",enableUploadFilesComponent:null})},a.toggleCameraComponent=function(){le.state.cameraEnabled?le.setState({enableCameraComponent:null,enableUploadFilesComponent:null,cameraEnabled:!1,uploadEnabled:!1,buttons:a.getButtons()}):le.setState({enableCameraComponent:o.a.createElement(L,{cameraClosed:a.onCloseCamera,onCapture:a.uploadClickedFile}),cameraEnabled:!0,uploadEnabled:!0,buttons:null})},a.toggleUploadComponent=function(){a.state.uploadEnabled||le.setState({enableUploadFilesComponent:o.a.createElement(M,{label:"Drag and Drop or Click to Upload a Single Image File!",display:"block",withCamera:!1,updateFilePondRef:a.updateFilePondRef,validation:a.validation}),uploadEnabled:!0,buttons:null})},a.onCloseCamera=function(){le.toggleCameraComponent()},a.removeCameraFromView=function(){le.setState({enableCameraComponent:null,cameraEnabled:!1})},a.state={filePondRef:null,validationMessage:null,validateComponent:null,enableCameraComponent:null,enableUploadFilesComponent:null,cameraEnabled:!1,uploadEnabled:!1,buttons:a.getButtons(),fileDataCopy:null,userId:e.userId},le=Object(E.a)(a),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getButtons",value:function(){return o.a.createElement(Te,{toggleCameraComponent:this.toggleCameraComponent,toggleUploadComponent:this.toggleUploadComponent})}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.buttons,this.state.enableCameraComponent,this.state.enableUploadFilesComponent,this.state.validateComponent,this.state.validationMessage)}}]),t}(o.a.Component),Pe=a(652),Ue=a(659),Me=a(637),We=a(34),ze=a(181),_e=a(140),qe=a.n(_e),Ge=Object(ze.a)((function(e){var t=e.breakpoints,a=e.spacing;return{card:Object(We.a)({width:"100%",maxWidth:500,borderRadius:a(2),transition:"0.3s",boxShadow:"0px 14px 80px rgba(34, 35, 58, 0.2)",position:"relative",overflow:"initial",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",paddingLeft:8,paddingRight:8,background:"linear-gradient(to right bottom, #1769aa, #33eaff)"},t.up("sm"),{textAlign:"left",flexDirection:"row-reverse"}),media:Object(We.a)({flexShrink:0,width:"50%",paddingTop:"34%",marginLeft:"auto",marginRight:"auto"},t.up("sm"),{marginRight:"initial"}),media2:Object(We.a)({flexShrink:0,width:"30%",paddingTop:"35%",marginLeft:"auto",marginRight:"auto"},t.up("sm"),{marginRight:"initial"}),overline:{lineHeight:2,color:"#ffffff",fontWeight:"bold",fontSize:"0.625rem",opacity:.7},heading:{fontWeight:"600",color:"#ffffff",letterSpacing:.3},button:Object(We.a)({fontWeight:"bold !important",backgroundColor:"rgba(255, 255, 255, 0.15)",borderRadius:100,paddingLeft:32,paddingRight:32,color:"#ffffff",textTransform:"none",width:"100%","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.32)"}},t.up("sm"),{width:"auto"})}})),Ve=function(e){var t=Ge();return o.a.createElement(pe.a,{className:t.card},e.score>0&&o.a.createElement(ge.a,{className:t.media,image:"https://webstockreview.net/images/good-clipart-well-done-2.png"}),0===e.score&&o.a.createElement(ge.a,{className:t.media2,image:"https://ignitewoo.com/wp-content/uploads/2012/08/woocommerce-loyalty-rewards.png"}),o.a.createElement(de.a,{className:t.content},o.a.createElement(k.a,{className:t.overline,variant:"overline"},"Every Detection Counts!"),o.a.createElement(k.a,{className:t.heading,variant:"h6",gutterBottom:!0},"Your Contribution Score"),o.a.createElement(ee.a,{style:{fontWeight:"bold",backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"},color:"primary",icon:o.a.createElement(qe.a,null),className:t.button,label:e.score+" / 100"})))},Ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={submittedCount:0,approvedCount:0,completedCount:0,score:0},z.a.post("https://spothole.ml:5000/api/reports",{data:{userId:a.props.userId}}).then((function(e){var t=e.data.filter((function(e){return"completed"===e.status})).length,n=e.data.filter((function(e){return"approved"===e.status})).length+t,o=e.data.filter((function(e){return"submitted"===e.status})).length+n,r=Math.ceil(100*(.7*parseFloat(n/o)+.3*parseFloat(t/n)));a.setState({submittedCount:o,approvedCount:n,completedCount:t,score:r||0})})),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement(pe.a,{style:{marginTop:"125px",borderRadius:12,minWidth:256,maxWidth:500,textAlign:"center",marginLeft:"50px",marginRight:"50px"}},o.a.createElement(de.a,null,o.a.createElement(Ue.a,{style:{width:120,height:120,margin:"auto",marginTop:"15px",marginBottom:"15px"},src:this.props.photoURL}),o.a.createElement("h3",{style:{fontSize:18,fontWeight:"bold",letterSpacing:"0.5px",marginTop:8,marginBottom:0}},this.props.name),o.a.createElement("span",{style:{fontSize:14,color:"#9e9e9e",marginBottom:"1em"}},o.a.createElement("a",{href:"mailto:"+this.props.email},this.props.email))),o.a.createElement(Me.a,{variant:"middle"}),o.a.createElement(Pe.a,{display:"flex"},o.a.createElement(Pe.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Submitted"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.submittedCount)),o.a.createElement(Pe.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Approved"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.approvedCount)),o.a.createElement(Pe.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Completed"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.completedCount))),o.a.createElement("div",{style:{marginLeft:"20px",marginRight:"20px",marginTop:"20px"}},o.a.createElement("center",null,o.a.createElement(Ve,{score:this.state.score})),o.a.createElement("br",null)))))}}]),t}(o.a.Component),He=a(2),Je=a(299),Xe=a(300),Ze=a(640),Ke=a(641),$e=a(656),Qe=a(180),et=a.n(Qe),tt=a(272),at=a.n(tt),nt=a(273),ot=a.n(nt),rt=a(274),it=a.n(rt),lt=a(579),ct=a(271),st=a.n(ct),mt=Object(S.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(lt.a),pt=Object(X.a)({root:{backgroundColor:"#f1f8e9",zIndex:1,color:"#333",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{color:"#fafafa",backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{color:"#fafafa",backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}});function ut(e){var t,a=pt(),n=e.active,r=e.completed,i={};return i=2===Fe.length?{1:o.a.createElement(et.a,null),2:o.a.createElement(st.a,null)}:{1:o.a.createElement(et.a,null),2:o.a.createElement(at.a,null),3:o.a.createElement(ot.a,null),4:o.a.createElement(it.a,null)},o.a.createElement("div",{className:Object(He.a)(a.root,(t={},Object(We.a)(t,a.active,n),Object(We.a)(t,a.completed,r),t))},i[String(e.icon)])}function dt(e){var t=4===e.stepNumber?["Submitted","Cancelled"]:["Submitted","Approved","Working","Completed"];return Fe=t,o.a.createElement("div",{style:{textAlign:"left",minWidth:"300px"}},o.a.createElement(Ze.a,{alternativeLabel:!0,activeStep:e.stepNumber,connector:o.a.createElement(mt,null),style:{float:"left"}},t.map((function(e){return o.a.createElement(Ke.a,{key:e},o.a.createElement($e.a,{StepIconComponent:ut},e))}))))}var gt,ht=a(642),ft=a(25),bt=a(277),Et=a.n(bt),yt=a(278),vt=a.n(yt),xt=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(ce.a,{classes:{container:e.slider},value:this.props.value,min:1,max:10,step:1,valueLabelDisplay:"on",disabled:!0}))}}]),t}(o.a.Component),St=Object(S.a)({root:{width:"100%"},slider:{padding:"22px 0px"}})(xt),Ct=function(e){return o.a.createElement(k.a,{gutterBottom:!0,style:{marginBottom:e.marginBottom,color:e.color}},o.a.createElement("b",null,e.text))},kt=a(298),Ot=function(e){return o.a.createElement("div",{style:{color:"#333"}},o.a.createElement(kt.a,{avatar:"https://i.ibb.co/Nry0dDp/image.png",side:e.side,messages:e.messageArray}))},wt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).setDescription=function(e){a.setState({commentText:e}),""===e?a.setState({buttonDisabled:!0}):a.setState({buttonDisabled:!1})},a.getAllComments=function(){z.a.post("https://spothole.ml:5000/api/reports/comments",{data:{caseId:a.state.caseId}}).then((function(e){gt.manageCommentData(e.data)})).catch((function(e){console.info("Problem with getting your comments!")}))},a.formatDateTime=function(e){var t=new Date(e),a=t.toLocaleString("en",{month:"long"}),n=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return t.getDate()+" "+a+", "+t.getFullYear()+" @ "+n+" \u2192 \n"},a.manageCommentData=function(e){if(e.length>0){var t=e[0].userType,n=[],r=[],i=1;e.map((function(l){return l.userType===t?(n.push(a.formatDateTime(l.commentDateTime)+l.commentText),t=l.userType):(r.push(o.a.createElement(Ot,{messageArray:n,side:gt.getChatMessageSide(t)})),t=l.userType,(n=[]).push(a.formatDateTime(l.commentDateTime)+l.commentText)),i===e.length&&r.push(o.a.createElement(Ot,{messageArray:n,side:gt.getChatMessageSide(t)})),++i,l})),gt.setState({commentComponentArray:r})}return!0},a.getChatMessageSide=function(e){return"U"===e?"right":"left"},a.handleSubmit=function(){z.a.post("https://spothole.ml:5000/api/submit/report/comment",{data:a.state}).then((function(e){gt.setState({emptyDescriptionBox:!0}),gt.state.makeBoxEmptyFunction(),a.getAllComments()})).catch((function(e){console.info("Problem with submitting your comment!")}))},a.makeEmpty=function(e){gt.setState({makeBoxEmptyFunction:e})},a.state={commentText:"",caseId:e.caseNumber,userType:"U",buttonDisabled:!0,commentComponentArray:[],emptyDescriptionBox:!1,makeBoxEmptyFunction:""},gt=Object(E.a)(a),a.getAllComments(),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("br",null),this.state.commentComponentArray.map((function(e,t){return o.a.createElement("div",{key:t},e)})),o.a.createElement("br",null),o.a.createElement(he,{passMakeEmpty:this.makeEmpty,emptyBox:this.state.emptyDescriptionBox,updateDescription:gt.setDescription}),o.a.createElement(x.a,{onClick:function(){return e.handleSubmit()},color:"primary",disabled:this.state.buttonDisabled,style:{fontSize:"15px",fontWeight:"bold"}},"Submit"))}}]),t}(o.a.Component),jt=(a(379),Object(X.a)({root:{maxWidth:700},media:{height:140},mediaMap:{height:200},headerTextColor:{color:"white"}}));function Lt(e){var t=jt(),a="https://maps.googleapis.com/maps/api/staticmap?size=512x512&format=png&style=feature:road.highway%7Celement:geometry%7Cvisibility:simplified%7Ccolor:0xc280e9&style=feature:transit.line%7Cvisibility:simplified%7Ccolor:0xbababa&style=feature:road.highway%7Celement:labels.text.stroke%7Cvisibility:on%7Ccolor:0xb06eba&style=feature:road.highway%7Celement:labels.text.fill%7Cvisibility:on%7Ccolor:0xffffff&visible="+e.data.latitude+","+e.data.longitude+"&markers=color:red%7Clabel:A%7C"+e.data.latitude+","+e.data.longitude+"&key="+d+"&zoom=15";return o.a.createElement(pe.a,{style:{border:"2px solid rgba(255,255,255,0.1)"},className:t.root},o.a.createElement(ge.a,{className:t.media,image:e.data.imageURL}),o.a.createElement(de.a,null,o.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"}),o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p"},o.a.createElement(k.a,{gutterBottom:!0},o.a.createElement(Et.a,null),"\xa0 \xa0 ",e.data.dateTime),o.a.createElement("br",null),o.a.createElement(k.a,{gutterBottom:!0},o.a.createElement(vt.a,null),"\xa0 \xa0 ",e.data.fullLocation),o.a.createElement("br",null),o.a.createElement(Ct,{text:"Severity Rate",marginBottom:"40px",color:t.headerTextColor.color}),o.a.createElement(St,{value:e.data.severity}),o.a.createElement("br",null),o.a.createElement(Ct,{text:"Status",marginBottom:"15px",color:t.headerTextColor.color}),o.a.createElement(dt,{stepNumber:e.data.stepNumber}),o.a.createElement("p",{style:{marginTop:"120px",textAlign:"justify"}},o.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),o.a.createElement(Ct,{text:"Complaint Description",marginBottom:"15px",color:t.headerTextColor.color}),e.data.fullDescription),o.a.createElement("br",null),o.a.createElement(ge.a,{className:t.mediaMap,image:a}),o.a.createElement("br",null),o.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),o.a.createElement(Ct,{text:"Comments",marginBottom:"15px",color:t.headerTextColor.color}),o.a.createElement(wt,{caseNumber:e.data.caseNumber}))))}function It(e){var t,a=o.a.useState(!1),n=Object(q.a)(a,2),r=n[0],i=n[1],l=o.a.useState("paper"),c=Object(q.a)(l,2),s=c[0],m=c[1],p=Object(ft.a)(),u=Object(ht.a)(p.breakpoints.down("lg")),d=function(){i(!1)},g=o.a.useRef(null);return o.a.useEffect((function(){if(r){var e=g.current;null!==e&&e.focus()}}),[r]),o.a.createElement("div",null,o.a.createElement(x.a,{className:e.buttonContentStyles,onClick:(t="paper",function(){i(!0),m(t)})},"View report"),o.a.createElement(fe.a,{open:r,onClose:d,scroll:s,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",fullScreen:u},o.a.createElement(ve.a,{id:"scroll-dialog-title"},"Report # ",e.caseNumber),o.a.createElement(Ee.a,{dividers:"paper"===s},o.a.createElement(Lt,{data:e})),o.a.createElement(be.a,null,o.a.createElement(x.a,{onClick:d,color:"primary"},"Close"))))}var Rt=Object(ze.a)((function(e){var t,a=e.breakpoints,n=e.spacing;return{root:Object(We.a)({margin:"auto",borderRadius:n(2),transition:"0.3s",boxShadow:"0px 14px 80px rgba(34, 35, 58, 0.2)",position:"relative",maxWidth:500,marginLeft:"auto",overflow:"initial",background:"#333",display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:n(2)},a.up("md"),{flexDirection:"row",paddingTop:n(2)}),media:(t={width:"88%",marginLeft:"auto",marginRight:"auto",marginTop:n(-3),height:0,paddingBottom:"48%",borderRadius:n(2),backgroundColor:"#fff",position:"relative"},Object(We.a)(t,a.up("md"),{width:"100%",marginLeft:n(-3),marginTop:0,transform:"translateX(-8px)"}),Object(We.a)(t,"&:after",{content:'" "',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:n(2),opacity:.5}),t),content:{padding:24},cta:{marginTop:24,textTransform:"initial"}}})),Tt=Object(ze.a)((function(e){var t="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif";return{overline:{textTransform:"uppercase",letterSpacing:"1px",fontSize:12,marginBottom:"0.875em",display:"inline-block"},heading:{fontSize:20,fontWeight:"bold",marginBottom:"0.35em",fontFamily:t},body:{marginBottom:(0,e.spacing)(4),fontSize:"0.8rem",letterSpacing:"0.00938em",fontFamily:t,color:"#eeeeee"},button:{backgroundImage:"linear-gradient(147deg, #2997f7 0%, #2997f7 74%)",borderRadius:5,paddingLeft:24,paddingRight:24,color:"#ffffff",marginTop:"25px",float:"right"}}})),Dt=function(e){var t,n=Rt(),r=Tt(),i=Object(Xe.a)(),l=a(380)(e.dateTime,"mmm d, yyyy"),c="submitted"===(t=e.status)?0:"approved"===t?1:"working"===t?2:"completed"===t?3:"cancelled"===t?4:void 0;return o.a.createElement(pe.a,{className:Object(He.a)(n.root,i.root)},o.a.createElement(ge.a,{className:n.media,image:e.imageURL}),o.a.createElement(de.a,null,o.a.createElement(Je.a,{classes:r,overline:l,heading:e.location,body:e.description}),o.a.createElement(dt,{stepNumber:c}),o.a.createElement(It,{imageURL:e.imageURL,dateTime:l,location:e.location,fullDescription:e.fullDescription,fullLocation:e.fullLocation,stepNumber:c,severity:e.severity,caseNumber:e.caseNumber,latitude:e.latitude,longitude:e.longitude,buttonContentStyles:r.button})))},Bt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={dashboardData:[]},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;z.a.post("https://spothole.ml:5000/api/reports",{data:{userId:this.props.userId}}).then((function(t){e.setState({dashboardData:t.data})})).catch((function(e){console.info("Unable to retrieve user report")}))}},{key:"render",value:function(){return o.a.createElement("div",{style:{marginTop:"100px"}},o.a.createElement("div",{style:{textAlign:"center",color:"#fff"}}," ",o.a.createElement("div",{style:{display:"inline-block",backgroundColor:"#333",color:"#fff",paddingLeft:"60px",paddingRight:"60px",paddingTop:"5px",paddingBottom:"5px",fontWeight:"bold",fontSize:"20px",border:"2px solid #333",borderRadius:"5px"}},"Number of Reports \xa0 [ ",this.state.dashboardData.length," ]")),o.a.createElement("br",null),o.a.createElement("br",null),0===this.state.dashboardData.length&&o.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px",marginTop:"150px",color:"#333"}}," ","No Reports yet. ",o.a.createElement("br",null)," Click the Floating Action Button ",o.a.createElement("br",null)," to start Reporting now."),o.a.createElement(J.a,{container:!0,spacing:3},this.state.dashboardData.map((function(e){return o.a.createElement(J.a,{key:e.case_id,item:!0,xs:12},o.a.createElement(Dt,{imageURL:e.imageURL,dateTime:e.created_date,fullLocation:e.location,fullDescription:e.description,location:e.location.length<27?e.location:e.location.substring(0,26)+" ...",description:e.description.lenght<150?e.description:e.description.substring(0,149)+" ...",status:e.status,severity:e.severity,caseNumber:e.case_id,latitude:e.latitude,longitude:e.longitude}),o.a.createElement("br",null),o.a.createElement("br",null))}))))}}]),t}(o.a.Component),Nt=a(106),Ft=a(78),At=Object(Nt.a)(Object(Nt.c)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key="+d+"&v=3.exp&libraries=geometry,drawing,places",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"400px"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})}),Object(Nt.d)((function(){return{isOpen:!1,infoIndex:null}}),{onToggleOpen:function(e){var t=e.isOpen;e.infoIndex;return function(e){return{isOpen:!t,infoIndex:e}}}}),Ft.withScriptjs,Ft.withGoogleMap,Object(Nt.b)({componentDidMount:function(){var e=this;(new google.maps.DirectionsService).route({origin:new google.maps.LatLng(parseFloat(this.props.startLat),parseFloat(this.props.startLng)),destination:new google.maps.LatLng(parseFloat(this.props.endLat),parseFloat(this.props.endLng)),travelMode:google.maps.TravelMode.DRIVING},(function(t,a){if(a===google.maps.DirectionsStatus.OK){var n=e,o=[];z.a.post("https://spothole.ml:5000/api/reports/all").then((function(a){a.data.forEach((function(e,a){google.maps.geometry.poly.isLocationOnEdge(new google.maps.LatLng(e.latitude,e.longitude),new google.maps.Polyline({path:t.routes[0].overview_path}),.001)&&o.push(e)})),n.setState({directions:t,selectedReports:o}),e.props.manageCounts(o.length,t.routes[0].legs[0].duration.text+" ("+t.routes[0].legs[0].distance.text+")",7)}))}else console.info("Error Fetching Directions")}))}}))((function(e){return o.a.createElement(Ft.GoogleMap,{defaultZoom:8,defaultCenter:{lat:parseFloat(e.centerLat),lng:parseFloat(e.centerLng)}},e.directions&&o.a.createElement(Ft.DirectionsRenderer,{directions:e.directions}),e.selectedReports.map((function(t,a){var n;n=parseInt(t.severity)<=3?"https://i.ibb.co/2dzSbjJ/output-onlinepngtools-2.png":parseInt(t.severity)<=6?"https://i.ibb.co/RC2LmDh/output-onlinepngtools-1.png":"https://i.ibb.co/kMZV43H/output-onlinepngtools.png";var r=new window.google.maps.MarkerImage(n,null,null,null,new window.google.maps.Size(48,48));return o.a.createElement(Ft.Marker,{icon:r,key:a,position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},onClick:function(){return e.onToggleOpen(a)}},e.isOpen&&e.infoIndex===a&&o.a.createElement(Ft.InfoWindow,{onCloseClick:e.onToggleOpen,key:a,visible:!0},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3px",marginRight:"3px"}},o.a.createElement("div",{style:{color:"#212121",paddingRight:"10px",paddingBottom:"10px",fontWeight:"bold",lineHeight:1.5}},"Reported On: ",t.created_date.split(" ")[0],o.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Current Status:"," ",t.status.charAt(0).toUpperCase()+t.status.slice(1),o.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Reported Severity: ",t.severity,"/10"," "),o.a.createElement("div",null,o.a.createElement("img",{src:t.imageURL,width:"200px",style:{border:"2px solid black",borderRadius:"10px",marginRight:"10px",marginBottom:"10px"},alt:"Validated Pothole"})))))})))})),Pt=a(654),Ut=a(653),Mt=a(643),Wt=a(282),zt=a.n(Wt),_t=a(283),qt=a.n(_t),Gt=a(143),Vt=a.n(Gt),Yt=Object(X.a)({root:{flexGrow:1,maxWidth:600,borderRadius:"3px",border:"1px SOLID #212121",marginBottom:"10px"}});function Ht(e){var t=Yt();return o.a.createElement("center",null,o.a.createElement(C.a,{square:!0,className:t.root},o.a.createElement(Ut.a,{value:0,indicatorColor:"#333",textColor:"#fff",centered:!0},o.a.createElement(Mt.a,{icon:o.a.createElement(zt.a,{color:"primary"}),label:e.totalCount+" Pothole(s)",disabled:!0}),o.a.createElement(Mt.a,{icon:o.a.createElement(qt.a,{color:"primary"}),label:e.eta,disabled:!0}))),o.a.createElement(C.a,{square:!0,className:t.root},o.a.createElement(Ut.a,{value:0,indicatorColor:"#333",textColor:"#fff",centered:!0},o.a.createElement(Mt.a,{icon:o.a.createElement(Vt.a,{style:{color:"#4747f4"}}),label:"Low Severity",disabled:!0}),o.a.createElement(Mt.a,{icon:o.a.createElement(Vt.a,{style:{color:"orange"}}),label:"Medium Severity",disabled:!0}),o.a.createElement(Mt.a,{icon:o.a.createElement(Vt.a,{style:{color:"red"}}),label:"High Severity",disabled:!0}))))}var Jt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).setSourceLocation=function(e,t){a.setState({startAddress:e,startLat:t.lat,startLng:t.lng})},a.setDestinationLocation=function(e,t){a.setState({endAddress:e,endLat:t.lat,endLng:t.lng})},a.manageCounts=function(e,t,n){a.setState({counterIndicators:o.a.createElement(Ht,{totalCount:e,eta:t,lowSeverity:7,mediumSeverity:8,highSeverity:10})})},a.submitOrignDestination=function(){a.setState({map:"Loading ... "},(function(){""!==a.state.startLat&&""!==a.state.startLng&&""!==a.state.endLat&&""!==a.state.endLng?a.setState({map:o.a.createElement("div",{style:{border:"2px SOLID white",borderRadius:"5px",marginTop:"15px"}},o.a.createElement(At,{manageCounts:a.manageCounts,centerLat:"-34.397",centerLng:"150.644",startLat:a.state.startLat,startLng:a.state.startLng,endLat:a.state.endLat,endLng:a.state.endLng,selectedReports:a.state.selectedReports,directions:!0}))}):a.setState({map:o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement(Pt.a,{variant:"filled",severity:"info"},"This is an error alert \u2014 Cannot make map, try again!"))})}))},a.state={centerLat:"",centerLng:"",startLat:"",startLng:"",endLat:"",endLng:"",startAddress:"",endAddress:"",selectedReports:[],map:"",counterIndicators:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(pe.a,{className:t.root},o.a.createElement(de.a,null,o.a.createElement(k.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Route It"),o.a.createElement(k.a,{variant:"body2",color:"textSecondary",component:"p"},"Use this to plan your travel, see the route to your destination and how severe it could be to travel. Also, monitor any route to see the progress for the reported pothole(s)."),o.a.createElement(re,{label:"Source Location",updateLocation:this.setSourceLocation,currentLocationOptional:!0}),o.a.createElement(re,{label:"Destination Location",updateLocation:this.setDestinationLocation,currentLocationOptional:!0}),o.a.createElement(x.a,{size:"large",color:"primary",onClick:function(){return e.submitOrignDestination()},className:t.buttonSubmit},"Get Route"),this.state.counterIndicators,this.state.map))}}]),t}(o.a.Component),Xt=Object(S.a)((function(e){return{root:{maxWidth:"100%",marginRight:"2%",marginLeft:"2%",marginTop:"100px",marginBottom:"30px"},buttonSubmit:{marginTop:"7px"},map:{border:"2px SOLID white",borderRadius:"5px"}}}))(Jt),Zt=a(284),Kt=a(660),$t=a(644),Qt=a(645),ea=a(646),ta=a(625),aa=a(624),na=a(285),oa=a.n(na),ra=a(289),ia=a.n(ra),la=a(290),ca=a.n(la),sa=a(647),ma=a(291),pa=a.n(ma),ua=a(293),da=a.n(ua),ga=a(294),ha=a.n(ga),fa=a(292),ba=a.n(fa),Ea=a(648),ya=a(649),va=a(286),xa=a.n(va),Sa=a(287),Ca=a.n(Sa),ka=a(288),Oa=a.n(ka),wa=Object(X.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(Zt.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},inputRoot:{color:"inherit"},inputInput:Object(We.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));function ja(){var e=wa(),t=Object(ft.a)(),a=o.a.useState(!1),n=Object(q.a)(a,2),r=n[0],i=n[1],l=o.a.useState("block"),c=Object(q.a)(l,2),s=c[0],m=c[1],p=function(){window.innerWidth<500&&m("block"),i(!1)};return o.a.createElement("div",{className:e.root},o.a.createElement($t.a,null),o.a.createElement(Qt.a,{position:"fixed",className:Object(He.a)(e.appBar,Object(We.a)({},e.appBarShift,r))},o.a.createElement(ea.a,null,o.a.createElement(aa.a,{color:"inherit","aria-label":"open drawer",onClick:function(){window.innerWidth<500&&m("none"),i(!0)},edge:"start",className:Object(He.a)(e.menuButton,r&&e.hide)},o.a.createElement(oa.a,null)),o.a.createElement(k.a,{style:{display:s},variant:"h5",noWrap:!0},"Spothole"),o.a.createElement("div",{style:{marginLeft:"auto"}},o.a.createElement(aa.a,{"aria-label":"About Me",color:"inherit"},o.a.createElement("a",{href:"https://nirbhay.me",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(xa.a,null))),o.a.createElement(aa.a,{"aria-label":"GitHub",color:"inherit"},o.a.createElement("a",{href:"https://github.com/nirbhayph",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(Ca.a,null))),o.a.createElement(aa.a,{"aria-label":"LinkedIn",color:"inherit"},o.a.createElement("a",{href:"https://linkedin.com/in/nirbhaypherwani",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(Oa.a,null))),o.a.createElement(aa.a,{"aria-label":"Acknowledgements",color:"inherit"},o.a.createElement("a",{href:"https://github.com/nirbhayph/spothole",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(qe.a,null)))))),o.a.createElement(Kt.a,{className:e.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:e.drawerPaper}},o.a.createElement("div",{className:e.drawerHeader},o.a.createElement(aa.a,{onClick:p},"ltr"===t.direction?o.a.createElement(ia.a,null):o.a.createElement(ca.a,null))),o.a.createElement(Me.a,null),o.a.createElement(ta.a,null,o.a.createElement(b.b,{to:"/report"},o.a.createElement(sa.a,{onClick:p,button:!0,key:"Report"},o.a.createElement(Ea.a,null,o.a.createElement(ae.a,{color:"primary"})),o.a.createElement(ya.a,{primary:"Report Pothole"}))),o.a.createElement(b.b,{to:"/"},o.a.createElement(sa.a,{onClick:p,button:!0,key:"Dashboard"},o.a.createElement(Ea.a,null,o.a.createElement(pa.a,{color:"primary"})),o.a.createElement(ya.a,{primary:"My Complaints"}))),o.a.createElement(b.b,{to:"/routing"},o.a.createElement(sa.a,{onClick:p,button:!0,key:"Route Navigaton"},o.a.createElement(Ea.a,null,o.a.createElement(ba.a,{color:"primary"})),o.a.createElement(ya.a,{primary:"Route Navigation"}))),o.a.createElement(b.b,{to:"/profile"},o.a.createElement(sa.a,{onClick:p,button:!0,key:"Profile"},o.a.createElement(Ea.a,null,o.a.createElement(da.a,{color:"primary"})),o.a.createElement(ya.a,{primary:"Profile"})))),o.a.createElement(b.b,{to:"/logout"},o.a.createElement(sa.a,{onClick:p,button:!0,key:"Logout"},o.a.createElement(Ea.a,null,o.a.createElement(ha.a,{color:"primary"})),o.a.createElement(ya.a,{primary:"Logout"})))))}var La=a(296),Ia=a.n(La),Ra=a(650),Ta=function(){return o.a.createElement("div",{style:{marginTop:"50px"}})},Da=a(295),Ba=a.n(Da),Na=Object(X.a)({root:{maxWidth:345,padding:"20px",borderRadius:"10px",background:"url(https://i.ibb.co/7tx4DWf/back.jpg)"}});function Fa(){var e=Na();return o.a.createElement(pe.a,{className:e.root},o.a.createElement("img",{src:"https://i.ibb.co/JdW6nVX/Spothole-1.png",style:{widht:"250px",height:"250px"},alt:"logo"}))}var Aa=Object(X.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random?road)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),marginTop:"50px",backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:"50px",maxWidth:"250px",paddingTop:"15px",paddingBottom:"15px"}}}));function Pa(e){var t=Aa();return o.a.createElement(J.a,{container:!0,component:"main",className:t.root},o.a.createElement($t.a,null),o.a.createElement(J.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),o.a.createElement(J.a,{item:!0,xs:12,sm:8,md:5,component:C.a,elevation:6,square:!0,style:{backgroundImage:"url('https://images.unsplash.com/photo-1543839482-a95d35fc5a77?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=900&q=80'), linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6))",backgroundBlendMode:"overlay",borderLeft:"5px SOLID #212121"}},o.a.createElement("div",{className:t.paper},o.a.createElement(k.a,{component:"h1",variant:"h1",style:{marginTop:"60px"}},o.a.createElement("b",null,o.a.createElement(Fa,null))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(k.a,{component:"h1",variant:"h4",style:{marginTop:"100px"}},o.a.createElement("b",null,"Citizen Log-In")),o.a.createElement(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return document.getElementsByClassName("abcRioButton")[0].click()}},o.a.createElement("b",null,"Sign In With Google \xa0",o.a.createElement(Ba.a,null))))))}var Ua=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).callRender=function(e){window.gapi.load("signin2",(function(){var t={width:0,height:0,client_id:u,onsuccess:e,longTitle:!1,theme:"dark"};gapi.signin2.render("loginButton",t)}))},a.logout=function(e){a.state.isSignedIn?window.gapi.auth2.getAuthInstance().signOut().then((function(){a.setState({isSignedIn:a.auth2.isSignedIn.get()},(function(){localStorage.setItem("signedIn",!1),a.urlRedirect(e||"http://nirbhay.me/spothole")}))})):console.info("Already Signed In")},a.urlRedirect=function(e){var t=setTimeout((function(){return window.location.replace(e),!0}),300);return(window.location=e)||(window.location.href=e)?(clearTimeout(t),!0):(clearTimeout(t),window.location.replace(e),!0)},a.validateAndPostProfileData=function(e){z.a.post(f,{data:{emailId:e.getEmail()}}).then((function(t){"allowed"===t.data?z.a.post("https://spothole.ml:5000/api/profile/update",{data:{userId:e.getId(),emailId:e.getEmail(),name:e.getName(),photoURL:e.getImageUrl()}}):(a.logout(h),console.info("Unauthorized Login"))})).catch((function(e){a.logout(),console.info("Cannot login at this time!")}))},a.navigationBar=function(){return o.a.createElement("div",null," ",o.a.createElement(ja,null),o.a.createElement(b.b,{to:"/report"},o.a.createElement(Ra.a,{color:"secondary","aria-label":"add",style:{position:"fixed",zIndex:1,right:0,bottom:0,marginRight:"25px",marginBottom:"25px"}},o.a.createElement(Ia.a,null))),o.a.createElement(Ta,null)," ")},a.isBlocked=function(){z.a.post(f,{data:{emailId:a.state.profileEmail}}).then((function(e){"allowed"!==e.data&&(a.logout(h),console.info("Unauthorized Login"))})).catch((function(e){a.logout(),console.info("Cannot login at this time!")}))},a.state={isSignedIn:!1,userId:"",profileName:"",profileEmail:"",profilePhotoURL:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.onSuccess.bind(this);window.gapi.load("auth2",(function(){e.auth2=gapi.auth2.init({client_id:u}),e.auth2.then((function(){var t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();e.setState({isSignedIn:e.auth2.isSignedIn.get(),userId:t.getId()||"",profileName:t.getName()||"",profileEmail:t.getEmail()||"",profilePhotoURL:t.getImageUrl()||""})}))})),this.callRender(t)}},{key:"onSuccess",value:function(){var e=this,t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();localStorage.setItem("signedIn",!0),this.setState({isSignedIn:!0,err:null,userId:t.getId(),profileName:t.getName(),profileEmail:t.getEmail(),profilePhotoURL:t.getImageUrl()},(function(){e.validateAndPostProfileData(t)}))}},{key:"onLoginFailed",value:function(e){this.setState({isSignedIn:!1,error:e})}},{key:"loginStatus",value:function(){if("true"===localStorage.getItem("signedIn")&&this.state.isSignedIn)switch(this.isBlocked(),this.props.linkTo){case"/dashboard":return o.a.createElement("div",null,o.a.createElement(Bt,{userId:this.state.userId}),this.navigationBar());case"/report":return o.a.createElement("div",null,o.a.createElement(Ae,{userId:this.state.userId}),this.navigationBar());case"/logout":this.logout();break;case"/routing":return o.a.createElement("div",null,o.a.createElement(Xt,{userId:this.state.userId}),this.navigationBar());case"/profile":return o.a.createElement("div",null,o.a.createElement(Ye,{userId:this.state.userId,name:this.state.profileName,email:this.state.profileEmail,photoURL:this.state.profilePhotoURL}),this.navigationBar());case"/":default:return o.a.createElement("div",null,o.a.createElement(Bt,{userId:this.state.userId}),this.navigationBar())}else{if("false"!==localStorage.getItem("signedIn")||!this.state.isSignedIn)return"true"!==localStorage.getItem("signedIn")?o.a.createElement("div",null,o.a.createElement("div",{id:"loginButton",style:{display:"none"}},"Login with Google"),o.a.createElement(Pa,null)):o.a.createElement("div",null);this.urlRedirect("http://nirbhay.me/spothole")}}},{key:"render",value:function(){return o.a.createElement("div",null,this.loginStatus())}}]),t}(n.Component),Ma=a(72),Wa=(a(574),a(639)),za=a(297),_a=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return window.location.href="https://nirbhay.me/spothole/404",o.a.createElement("div",null,"404")}}]),t}(o.a.Component),qa=Object(za.a)({palette:{type:"dark",primary:{main:"#2997f7"},secondary:{main:"#ff0000"}},overrides:{MuiPaper:{root:{backgroundColor:"#333"}},MuiStepper:{root:{padding:"0px"}}}});var Ga=function(){return o.a.createElement(Wa.a,{theme:qa},o.a.createElement(b.a,null,o.a.createElement("div",null,o.a.createElement(Ma.c,null,o.a.createElement(Ma.a,{path:"/report",exact:!0},o.a.createElement(Ua,{linkTo:"/report"})),o.a.createElement(Ma.a,{path:"/profile",exact:!0},o.a.createElement(Ua,{linkTo:"/profile"})),o.a.createElement(Ma.a,{path:"/logout",exact:!0},o.a.createElement(Ua,{linkTo:"/logout"})),o.a.createElement(Ma.a,{path:"/routing",exact:!0},o.a.createElement(Ua,{linkTo:"/routing"})),o.a.createElement(Ma.a,{path:"/dashboard",exact:!0},o.a.createElement(Ua,{linkTo:"/dashboard"})),o.a.createElement(Ma.a,{path:"/",exact:!0},o.a.createElement(Ua,{linkTo:"/dashboard"})),o.a.createElement(Ma.a,{path:"*",exact:!0,component:_a})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ga,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[324,1,2]]]);
//# sourceMappingURL=main.e00ab652.chunk.js.map