(this.webpackJsonpspothole=this.webpackJsonpspothole||[]).push([[0],{321:function(e,t,a){e.exports=a(572)},326:function(e,t,a){},376:function(e,t,a){},572:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(18),i=a.n(r),l=(a(326),a(12)),c=a(13),s=a(15),m=a(14),u=a(16),p="53865530561-eoook3l9t27uvkec6561d3aolde6mims.apps.googleusercontent.com",d="https://spothole.ml:5000",g=d+"/api/user/validate",h="https://nirbhay.me/spothole/UALogin",f=a(41),b=a(65),E=a(142),y=a.n(E),v=(a(327),a(618)),x=a(5),S=a(144),C=a(94),O=a(256),k=a.n(O),w=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleTakePhoto",value:function(e){console.log("takePhoto")}},{key:"handleTakePhotoAnimationDone",value:function(e){console.log("takePhoto",e)}},{key:"handleCameraError",value:function(e){console.log("handleCameraError",e)}},{key:"handleCameraStart",value:function(e){console.log("handleCameraStart")}},{key:"handleCameraStop",value:function(){console.log("handleCameraStop")}},{key:"render",value:function(){var e=this;return o.a.createElement(S.a,{variant:"outlined",style:{width:"80%",marginLeft:"10%",marginTop:"150px"}},o.a.createElement(v.a,{color:"secondary",variant:"contained",style:{zIndex:1,float:"right",marginBottom:"10px",marginRight:"10px",marginTop:"10px"},onClick:function(){return e.props.cameraClosed()}},"Close Camera \xa0",o.a.createElement(k.a,null)),o.a.createElement(y.a,{onTakePhoto:function(t){e.props.onCapture(t)},onTakePhotoAnimationDone:function(t){e.handleTakePhotoAnimationDone(t)},onCameraError:function(t){e.handleCameraError(t)},idealFacingMode:E.FACING_MODES.ENVIRONMENT,idealResolution:{width:600,height:480},imageType:E.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!0,isImageMirror:!1,isSilentMode:!1,isDisplayStartCameraError:!0,isFullscreen:!1,sizeFactor:1,onCameraStart:function(t){e.handleCameraStart(t)},onCameraStop:function(){e.handleCameraStop()}}),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p",style:{marginTop:"-5px",textAlign:"center",fontSize:"18px",backgroundColor:"#2997f7",color:"white"}},o.a.createElement("b",null,"Click a Picture with a Pothole to get started!")))}}]),t}(o.a.Component),j=Object(x.a)((function(e){return{root:{flexGrow:1,marginTop:"60px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"480px",marginRight:"10px",marginLeft:"10px"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(w),L=a(177),I=(a(332),a(257)),R=a.n(I),T=a(258),D=a.n(T),B=(a(333),a(259)),N=a.n(B),F=a(260),A=a.n(F);Object(L.registerPlugin)(R.a,D.a,N.a,A.a);var U=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleInit",value:function(){this.props.updateFilePondRef(this.pond)}},{key:"loaded",value:function(e){var t=JSON.parse(e).filename[0];this.props.validation(t)}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:"App",style:{marginTop:"100px",marginLeft:"20px",marginRight:"20px",display:this.props.display}},o.a.createElement(S.a,{variant:"outlined",className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(L.FilePond,{ref:function(t){return e.pond=t},acceptedFileTypes:["image/png","image/jpg","image/jpeg"],labelIdle:this.props.label,allowMultiple:!1,oninit:function(){return e.handleInit()},maxFileSize:"10MB",allowFileSizeValidation:!0,server:{process:{url:"https://spothole.ml:5000/api/upload",onload:function(t){return e.loaded(t)}}}}))))}}]),t}(o.a.Component),P=Object(x.a)((function(e){return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"500px",marginRight:"10px",marginLeft:"10px",maxWidth:"60%",position:"relative",top:"50%",transform:"translate(32%, 20%)"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(U),z=a(21),M=a.n(z),W=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(s.a)(this,Object(m.a)(t).call(this,e)),M.a.post("https://spothole.ml:5000/api/detect/single",{image_url:e.imageURL}).then((function(t){e.validationCompleted(t)})).catch((function(e){console.info("Unable to validate image!")})),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(o.a.Component),Y=a(43),_=a(648),q=a(652),G=a(266),V=a.n(G),Z=a(623),H=a(619),J=a(261),X=a.n(J),Q=a(262),K=a.n(Q),$=a(654),ee=a(139),te=a.n(ee);var ae={current:null},ne=Object(H.a)((function(e){return{icon:{color:e.palette.text.secondary,marginRight:e.spacing(2)},textInput:{marginBottom:"10px"},labelText:{marginTop:"25px",marginBottom:"10px"},buttonCurrentLocation:{marginBottom:"15px"}}}));function oe(e){var t=ne(),a=o.a.useState(""),n=Object(Y.a)(a,2),r=n[0],i=n[1],l=o.a.useState([]),c=Object(Y.a)(l,2),s=c[0],m=c[1],u=o.a.useState(!1),p=Object(Y.a)(u,2),d=p[0],g=p[1],h=o.a.useState(""),f=Object(Y.a)(h,2),b=f[0],E=(f[1],o.a.useState("")),y=Object(Y.a)(E,2),v=y[0],x=(y[1],o.a.useRef(!1));"undefined"===typeof window||x.current||(document.querySelector("#google-maps")||function(e,t,a){if(t){var n=document.createElement("script");n.setAttribute("async",""),n.setAttribute("id",a),n.src=e,t.appendChild(n)}}("https://maps.googleapis.com/maps/api/js?key=AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ&libraries=places",document.querySelector("head"),"google-maps"),x.current=!0);var S=function(t){i(t.target.value),""!==t.target.value.trim()?g(!1):g(!0),console.info("The field is now required",d),""===t.target.value.trim()&&void 0===e.currentLocationOptional&&e.updateLocation(b)},O=o.a.useMemo((function(){return K()((function(e,t){ae.current.getPlacePredictions(e,t)}),200)}),[]);o.a.useEffect((function(){var e=!0;if(!ae.current&&window.google&&(ae.current=new window.google.maps.places.AutocompleteService),ae.current){if(""!==r)return O({input:r},(function(t){e&&m(t||[])})),function(){e=!1};m([])}}),[r,O]);return o.a.createElement("div",null,o.a.createElement(C.a,{gutterBottom:!0,className:t.labelText},e.label||"Tag Pothole's Location"),o.a.createElement(q.a,{id:"google-map-demo",getOptionLabel:function(e){return"string"===typeof e?e:e.description},filterOptions:function(e){return e},options:s,autoComplete:!0,includeInputInList:!0,disableOpenOnFocus:!0,fullWidth:!0,onChange:function(t,a){try{M.a.get("https://maps.googleapis.com/maps/api/geocode/json?place_id="+a.place_id+"&key=AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ").then((function(t){e.updateLocation(a.description,t.data.results[0].geometry.location)}))}catch(n){e.updateLocation(b,v)}},renderInput:function(e){return o.a.createElement(_.a,Object.assign({},e,{label:"Add a location",variant:"outlined",fullWidth:!0,className:t.textInput,onChange:S}))},renderOption:function(e){var a=e.structured_formatting.main_text_matched_substrings,n=X()(e.structured_formatting.main_text,a.map((function(e){return[e.offset,e.offset+e.length]})));return o.a.createElement(Z.a,{container:!0,alignItems:"center"},o.a.createElement(Z.a,{item:!0},o.a.createElement(V.a,{className:t.icon})),o.a.createElement(Z.a,{item:!0,xs:!0},n.map((function(e,t){return o.a.createElement("span",{key:t,style:{fontWeight:e.highlight?700:400}},e.text)})),o.a.createElement(C.a,{variant:"body2",color:"textSecondary"},e.structured_formatting.secondary_text)))}}),void 0===e.currentLocationOptional&&o.a.createElement("div",null," ",o.a.createElement("h5",{style:{color:"white",textAlign:"center",fontWeight:"bold"}},"OR"),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("i",null,"(Will Use Current Location Instead)")),o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement($.a,{style:{marginBottom:"25px",marginTop:"7px"},icon:o.a.createElement(te.a,null),label:e.permissionLocationValue,variant:"outlined",color:"primary"}))," "))}var re,ie,le=a(655),ce=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={value:5},a.handleChange=function(e,t){a.setState({value:t}),a.props.updateSeverity(t)},e.updateSeverity(a.state.value),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.value;return o.a.createElement("div",{className:e.root},o.a.createElement(C.a,{gutterBottom:!0},"Severity Rate ",o.a.createElement("i",null,"(Choose a value between 0-10)")),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(le.a,{classes:{container:e.slider},value:t,min:1,max:10,step:1,onChange:this.handleChange,valueLabelDisplay:"on"}))}}]),t}(o.a.Component),se=Object(x.a)({root:{width:"100%"},slider:{padding:"22px 0px"}})(ce),me=a(629),ue=a(632),pe=a(631),de=a(630),ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).makeEmpty=function(){a.setState({content:""}),a.checkRequired(a.textFieldRef.current,"required")},a.checkRequired=function(e,t){var n=e.value.trim();""!==n?a.setState({errorRequired:!1,content:e.value}):a.setState({errorRequired:void 0===t,content:e.value}),a.props.updateDescription(n)},a.state={errorRequired:!1,content:""},a.textFieldRef=o.a.createRef(),e.passMakeEmpty(a.makeEmpty),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(C.a,{style:{marginBottom:"10px",marginTop:"5px"},gutterBottom:!0},"Add Comment"),o.a.createElement(_.a,{inputRef:this.textFieldRef,error:this.state.errorRequired,onChange:function(t){return e.checkRequired(t.target)},required:!0,fullWidth:!0,variant:"outlined",placeholder:"Supporting comments on the report",multiline:!0,rows:4,rowsMax:50,label:"Additional Comments (Required)",value:this.state.content}))}}]),t}(o.a.Component),he=a(624),fe=a(628),be=a(626),Ee=a(627),ye=a(625),ve=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).handleClose=function(){void 0!==a.props.linkTo&&(window.location.href="/spothole/#"+a.props.linkTo,window.location.reload()),a.props.updateCloseDialogState()},a.justClose=function(){a.props.updateCloseDialogState()},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(he.a,{open:this.props.dialogOpenState,onClose:function(){return e.justClose()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ye.a,{id:"alert-dialog-title"},this.props.title),o.a.createElement(be.a,null,o.a.createElement(Ee.a,{id:"alert-dialog-description"},this.props.content)),o.a.createElement(fe.a,null,o.a.createElement(v.a,{onClick:function(){return e.handleClose()},color:this.props.color,autoFocus:!0},this.props.buttonText),void 0!==this.props.linkTo&&o.a.createElement(v.a,{onClick:function(){return e.justClose()},color:"primary",autoFocus:!0},"No"))))}}]),t}(o.a.Component),xe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).setLocation=function(e,t){a.state.location!==e&&re.setState({location:e,locationLatLng:t})},a.setPermissionBasedLocation=function(e,t){a.state.location!==e&&re.setState({permissionLocation:e,permissionLocationLatLng:t})},a.showPosition=function(e){M.a.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.coords.latitude+","+e.coords.longitude+"&key=AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ").then((function(e){a.setPermissionBasedLocation(e.data.results[0].formatted_address,e.data.results[0].geometry.location)}),(function(e){console.info("Cannot update current location")}))},a.getLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a.showPosition):console.info("Geolocation is not supported by this browser.")},a.setSeverity=function(e){re.setState({severity:e})},a.setDescription=function(e){re.setState({description:e})},a.updateCloseDialogState=function(){re.setState({dialogOpenState:!1})},a.updateCancelDialogState=function(){re.setState({cancelDialogOpenState:!1})},a.submitForm=function(){var e,t;""===a.state.location&&""===a.state.permissionLocation?e="":""!==a.state.location?(e=a.state.location,t=a.state.locationLatLng):(e=a.state.permissionLocation,t=a.state.permissionLocationLatLng),""===a.state.description||""===e||""===a.state.severity?a.setState({dialogOpenState:!0}):(a.setState({dialogOpenState:!1}),M.a.post("https://spothole.ml:5000/api/submit/report",{data:{description:a.state.description,location:e,locationLatLng:t,imageURL:a.state.imageURL,userId:a.state.userId,severity:a.state.severity}}).then((function(e){a.setState({showSubmittedFeedback:!0})}),(function(e){console.info("Problem with submitting your report")})))},a.makeEmpty=function(e){re.setState({makeBoxEmptyFunction:e})},a.showCancelAlert=function(){re.setState({cancelDialogOpenState:!0})},a.navigateToNewReport=function(){window.location.reload()},a.state={imageURL:e.reportData.split(" : ")[0],location:"",severity:"",description:"",dialogOpenState:!1,cancelDialogOpenState:!1,locationLatLng:"",makeBoxEmptyFunction:"",showSubmittedFeedback:!1,permissionLocation:"",permissionLocationLatLng:"",userId:e.userId},re=Object(b.a)(a),a.getLocation(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",null,!this.state.showSubmittedFeedback&&"Your image is valid!"===this.props.reportData.split(" : ")[1]&&o.a.createElement("div",null,o.a.createElement(me.a,{className:t.root},o.a.createElement(de.a,{component:"img",alt:"Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Validated Pothole Image"}),o.a.createElement(pe.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Create Report"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"We were able to identify one or more potholes in the image you provided. Please fill the rest of the details to file an official complaint. Once you create a report and it gets approved you cannot cancel the request made until resolved by the the concerned authority. Don't forget to add supporting comments to your report."),o.a.createElement(oe,{updateLocation:this.setLocation,permissionLocationValue:this.state.permissionLocation}),o.a.createElement(se,{updateSeverity:this.setSeverity}),o.a.createElement(ge,{passMakeEmpty:this.makeEmpty,updateDescription:this.setDescription})),o.a.createElement(ue.a,null,o.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return e.submitForm()}},"Submit"),o.a.createElement(v.a,{size:"small",color:"secondary",onClick:function(){return e.showCancelAlert()}},"Cancel"))),o.a.createElement(ve,{dialogOpenState:this.state.cancelDialogOpenState,updateCloseDialogState:this.updateCancelDialogState,title:"Cancel Reporting!",content:"Are you sure you want to cancel?",buttonText:"Yes, Cancel Report",linkTo:"/report",color:"secondary"}),o.a.createElement(ve,{dialogOpenState:this.state.dialogOpenState,updateCloseDialogState:this.updateCloseDialogState,title:"Required Fields Validation",content:"One or more required fields are empty!",buttonText:"OK",color:"primary"})),!("Your image is valid!"===this.props.reportData.split(" : ")[1])&&o.a.createElement("div",null,o.a.createElement(me.a,{className:t.root},o.a.createElement(de.a,{component:"img",alt:"Not Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Not Validated Pothole Image"}),o.a.createElement(pe.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Seems Like an Invalid Image"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"There does not seem to be a pothole in this image. Please retry with a different image. If you feel you have uploaded a correct image feel free to email us at"," ",o.a.createElement("a",{href:"mailto:support.spothole@gmail.com"},"support.spothole@gmail.com"))),o.a.createElement(ue.a,{style:{marginTop:"10px"}},o.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return e.navigateToNewReport()}},"Retry"),o.a.createElement(f.b,{to:"/dashboard"},o.a.createElement(v.a,{size:"small",color:"primary"},"Go to My Complaints"))))),this.state.showSubmittedFeedback&&"Your image is valid!"===this.props.reportData.split(" : ")[1]&&o.a.createElement("div",null,o.a.createElement(me.a,{className:t.root},o.a.createElement(de.a,{component:"img",alt:"Detected Pothole Image",height:"400",image:this.props.reportData.split(" : ")[0],title:"Validated Pothole Image"}),o.a.createElement(pe.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Complaint Registered!"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"Thank you for submitting the report. A concerned authority will get back to you. You can find the new report and monitor it's status in the"," ",o.a.createElement(f.b,{to:"/dashboard"},"My Complaints")," section."),o.a.createElement("br",null),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"Keep a track of your report through the comments section and feel free to exchange more thoughts with the concerned authority too. You can even email us at"," ",o.a.createElement("a",{href:"mailto:support.spothole@gmail.com"},"support.spothole@gmail.com")," ","for more questions.")),o.a.createElement(ue.a,{style:{marginTop:"10px"}},o.a.createElement(f.b,{to:"/dashboard"},o.a.createElement(v.a,{size:"small",color:"primary"},"Go to My Complaints"))))))}}]),t}(o.a.Component),Se=Object(x.a)((function(e){return{root:{maxWidth:"100%",marginRight:"10%",marginLeft:"10%",marginTop:"120px",marginBottom:"30px"}}}))(xe),Ce=a(269),Oe=a.n(Ce),ke=a(270),we=a.n(ke),je=a(268),Le=a.n(je),Ie=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement(Z.a,{container:!0,spacing:2,justify:"center"},o.a.createElement(Z.a,{item:!0,xs:10,sm:10},o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(C.a,{gutterBottom:!0,style:{textAlign:"center",fontSize:"2.7em"}},"Spot and Report"," ",o.a.createElement(Le.a,{style:{fontSize:50},color:"secondary"})," Potholes Now"),o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p",style:{textAlign:"center",fontSize:"1.5em",maxWidth:"400px"}},"Choose between either uploading a photo from the file system or using the camera to click a photo."))),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement(Z.a,{item:!0,xs:6,sm:5},o.a.createElement(S.a,{variant:"outlined",onClick:function(){return e.props.toggleCameraComponent()},className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(Oe.a,{style:{fontSize:120}})," ",o.a.createElement("br",null)," Upload From Camera"))),o.a.createElement(Z.a,{item:!0,xs:6,sm:5},o.a.createElement(S.a,{variant:"outlined",onClick:function(){return e.props.toggleUploadComponent()},className:t.paper},o.a.createElement("div",{className:t.text},o.a.createElement(we.a,{style:{fontSize:120}})," ",o.a.createElement("br",null)," Upload From File Manager")))))}}]),t}(o.a.Component),Re=Object(x.a)((function(e){return{root:{flexGrow:1,marginTop:"60px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,cursor:"pointer",height:"300px",marginRight:"10px",marginLeft:"10px",borderRadius:"10px",border:"1px solid #212121"},text:{fontSize:"24px",position:"relative",top:"50%",transform:"translateY(-50%)"}}}))(Ie),Te=a(633),De=Object(H.a)((function(e){return{root:{width:"60%","& > * + *":{marginTop:e.spacing(2)},marginTop:"180px"}}}));function Be(){var e=De();return o.a.createElement(Z.a,{container:!0,spacing:2,justify:"center"},o.a.createElement("div",{className:e.root},o.a.createElement(Te.a,null)))}var Ne,Fe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).uploadClickedFile=function(e){ie.removeCameraFromView(),ie.setState({enableUploadFilesComponent:o.a.createElement(P,{label:"Preview uploading of your clicked image!",display:"block",updateFilePondRef:a.updateFilePondRef,validation:a.validation}),fileDataCopy:e})},a.updateFilePondRef=function(e){ie.setState({filePondRef:e}),null!==ie.state.fileDataCopy&&ie.state.filePondRef.addFile(ie.state.fileDataCopy)},a.validation=function(e){ie.setState({buttons:null,validationMessage:o.a.createElement(Be,null),validateComponent:o.a.createElement(W,{imageURL:e,validationCompleted:a.validationCompleted})})},a.validationCompleted=function(e){ie.setState({validationMessage:o.a.createElement(Se,{userId:a.state.userId,reportData:e.data}),validateComponent:"",enableUploadFilesComponent:null})},a.toggleCameraComponent=function(){ie.state.cameraEnabled?ie.setState({enableCameraComponent:null,enableUploadFilesComponent:null,cameraEnabled:!1,uploadEnabled:!1,buttons:a.getButtons()}):ie.setState({enableCameraComponent:o.a.createElement(j,{cameraClosed:a.onCloseCamera,onCapture:a.uploadClickedFile}),cameraEnabled:!0,uploadEnabled:!0,buttons:null})},a.toggleUploadComponent=function(){a.state.uploadEnabled||ie.setState({enableUploadFilesComponent:o.a.createElement(P,{label:"Drag and Drop or Click to Upload a Single Image File!",display:"block",withCamera:!1,updateFilePondRef:a.updateFilePondRef,validation:a.validation}),uploadEnabled:!0,buttons:null})},a.onCloseCamera=function(){ie.toggleCameraComponent()},a.removeCameraFromView=function(){ie.setState({enableCameraComponent:null,cameraEnabled:!1})},a.state={filePondRef:null,validationMessage:null,validateComponent:null,enableCameraComponent:null,enableUploadFilesComponent:null,cameraEnabled:!1,uploadEnabled:!1,buttons:a.getButtons(),fileDataCopy:null,userId:e.userId},ie=Object(b.a)(a),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getButtons",value:function(){return o.a.createElement(Re,{toggleCameraComponent:this.toggleCameraComponent,toggleUploadComponent:this.toggleUploadComponent})}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.buttons,this.state.enableCameraComponent,this.state.enableUploadFilesComponent,this.state.validateComponent,this.state.validationMessage)}}]),t}(o.a.Component),Ae=a(649),Ue=a(656),Pe=a(634),ze=a(34),Me=a(181),We=a(271),Ye=a.n(We),_e=Object(Me.a)((function(e){var t=e.breakpoints,a=e.spacing;return{card:Object(ze.a)({width:"100%",maxWidth:500,borderRadius:a(2),transition:"0.3s",boxShadow:"0px 14px 80px rgba(34, 35, 58, 0.2)",position:"relative",overflow:"initial",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",paddingLeft:8,paddingRight:8,background:"linear-gradient(to right bottom, #1769aa, #33eaff)"},t.up("sm"),{textAlign:"left",flexDirection:"row-reverse"}),media:Object(ze.a)({flexShrink:0,width:"50%",paddingTop:"34%",marginLeft:"auto",marginRight:"auto"},t.up("sm"),{marginRight:"initial"}),media2:Object(ze.a)({flexShrink:0,width:"30%",paddingTop:"35%",marginLeft:"auto",marginRight:"auto"},t.up("sm"),{marginRight:"initial"}),overline:{lineHeight:2,color:"#ffffff",fontWeight:"bold",fontSize:"0.625rem",opacity:.7},heading:{fontWeight:"600",color:"#ffffff",letterSpacing:.3},button:Object(ze.a)({fontWeight:"bold !important",backgroundColor:"rgba(255, 255, 255, 0.15)",borderRadius:100,paddingLeft:32,paddingRight:32,color:"#ffffff",textTransform:"none",width:"100%","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.32)"}},t.up("sm"),{width:"auto"})}})),qe=function(e){var t=_e();return o.a.createElement(me.a,{className:t.card},e.score>0&&o.a.createElement(de.a,{className:t.media,image:"https://webstockreview.net/images/good-clipart-well-done-2.png"}),0===e.score&&o.a.createElement(de.a,{className:t.media2,image:"https://ignitewoo.com/wp-content/uploads/2012/08/woocommerce-loyalty-rewards.png"}),o.a.createElement(pe.a,{className:t.content},o.a.createElement(C.a,{className:t.overline,variant:"overline"},"Every Detection Counts!"),o.a.createElement(C.a,{className:t.heading,variant:"h6",gutterBottom:!0},"Your Contribution Score"),o.a.createElement($.a,{style:{fontWeight:"bold",backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"},color:"primary",icon:o.a.createElement(Ye.a,null),className:t.button,label:e.score+" / 100"})))},Ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={submittedCount:0,approvedCount:0,completedCount:0,score:0},M.a.post("https://spothole.ml:5000/api/reports",{data:{userId:a.props.userId}}).then((function(e){var t=e.data.filter((function(e){return"completed"===e.status})).length,n=e.data.filter((function(e){return"approved"===e.status})).length+t,o=e.data.filter((function(e){return"submitted"===e.status})).length+n+t,r=Math.ceil(100*(.7*parseFloat(n/o)+.3*parseFloat(t/n)));a.setState({submittedCount:o,approvedCount:n,completedCount:t,score:r||0})})),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("center",null,o.a.createElement(me.a,{style:{marginTop:"125px",borderRadius:12,minWidth:256,maxWidth:500,textAlign:"center",marginLeft:"50px",marginRight:"50px"}},o.a.createElement(pe.a,null,o.a.createElement(Ue.a,{style:{width:120,height:120,margin:"auto",marginTop:"15px",marginBottom:"15px"},src:this.props.photoURL}),o.a.createElement("h3",{style:{fontSize:18,fontWeight:"bold",letterSpacing:"0.5px",marginTop:8,marginBottom:0}},this.props.name),o.a.createElement("span",{style:{fontSize:14,color:"#9e9e9e",marginBottom:"1em"}},o.a.createElement("a",{href:"mailto:"+this.props.email},this.props.email))),o.a.createElement(Pe.a,{variant:"middle"}),o.a.createElement(Ae.a,{display:"flex"},o.a.createElement(Ae.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Submitted"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.submittedCount)),o.a.createElement(Ae.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Approved"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.approvedCount)),o.a.createElement(Ae.a,{p:2,flex:"auto"},o.a.createElement("p",{style:{fontSize:12,color:"#9e9e9e",fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0}},"Completed"),o.a.createElement("p",{style:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}},this.state.completedCount))),o.a.createElement("div",{style:{marginLeft:"20px",marginRight:"20px",marginTop:"20px"}},o.a.createElement("center",null,o.a.createElement(qe,{score:this.state.score})),o.a.createElement("br",null)))))}}]),t}(o.a.Component),Ve=a(2),Ze=a(296),He=a(297),Je=a(637),Xe=a(638),Qe=a(653),Ke=a(180),$e=a.n(Ke),et=a(273),tt=a.n(et),at=a(274),nt=a.n(at),ot=a(275),rt=a.n(ot),it=a(576),lt=a(272),ct=a.n(lt),st=Object(x.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(it.a),mt=Object(H.a)({root:{backgroundColor:"#f1f8e9",zIndex:1,color:"#333",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{color:"#fafafa",backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{color:"#fafafa",backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}});function ut(e){var t,a=mt(),n=e.active,r=e.completed,i={};return i=2===Ne.length?{1:o.a.createElement($e.a,null),2:o.a.createElement(ct.a,null)}:{1:o.a.createElement($e.a,null),2:o.a.createElement(tt.a,null),3:o.a.createElement(nt.a,null),4:o.a.createElement(rt.a,null)},o.a.createElement("div",{className:Object(Ve.a)(a.root,(t={},Object(ze.a)(t,a.active,n),Object(ze.a)(t,a.completed,r),t))},i[String(e.icon)])}function pt(e){var t=o.a.useState(e.stepNumber),a=Object(Y.a)(t,2),n=(a[0],a[1],4===e.stepNumber?["Submitted","Cancelled"]:["Submitted","Approved","Working","Completed"]);return Ne=n,o.a.createElement("div",{style:{textAlign:"left",minWidth:"300px"}},o.a.createElement(Je.a,{alternativeLabel:!0,activeStep:e.stepNumber,connector:o.a.createElement(st,null),style:{float:"left"}},n.map((function(e){return o.a.createElement(Xe.a,{key:e},o.a.createElement(Qe.a,{StepIconComponent:ut},e))}))))}var dt,gt=a(639),ht=a(24),ft=a(278),bt=a.n(ft),Et=a(141),yt=a.n(Et),vt=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(le.a,{classes:{container:e.slider},value:this.props.value,min:1,max:10,step:1,valueLabelDisplay:"on",disabled:!0}))}}]),t}(o.a.Component),xt=Object(x.a)({root:{width:"100%"},slider:{padding:"22px 0px"}})(vt),St=function(e){return o.a.createElement(C.a,{gutterBottom:!0,style:{marginBottom:e.marginBottom,color:e.color}},o.a.createElement("b",null,e.text))},Ct=a(295),Ot=function(e){return o.a.createElement("div",{style:{color:"#333"}},o.a.createElement(Ct.a,{avatar:"https://i.ibb.co/Nry0dDp/image.png",side:e.side,messages:e.messageArray}))},kt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).setDescription=function(e){a.setState({commentText:e}),""===e?a.setState({buttonDisabled:!0}):a.setState({buttonDisabled:!1})},a.getAllComments=function(){M.a.post("https://spothole.ml:5000/api/reports/comments",{data:{caseId:a.state.caseId}}).then((function(e){dt.manageCommentData(e.data)})).catch((function(e){console.info("Problem with getting your comments!")}))},a.formatDateTime=function(e){var t=new Date(e),a=t.toLocaleString("en",{month:"long"}),n=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return t.getDate()+" "+a+", "+t.getFullYear()+" @ "+n+" \u2192 \n"},a.manageCommentData=function(e){if(e.length>0){var t=e[0].userType,n=[],r=[],i=1;e.map((function(l){return l.userType===t?(n.push(a.formatDateTime(l.commentDateTime)+l.commentText),t=l.userType):(r.push(o.a.createElement(Ot,{messageArray:n,side:dt.getChatMessageSide(t)})),t=l.userType,(n=[]).push(a.formatDateTime(l.commentDateTime)+l.commentText)),i===e.length&&r.push(o.a.createElement(Ot,{messageArray:n,side:dt.getChatMessageSide(t)})),++i,l})),dt.setState({commentComponentArray:r})}return!0},a.getChatMessageSide=function(e){return"U"===e?"right":"left"},a.handleSubmit=function(){M.a.post("https://spothole.ml:5000/api/submit/report/comment",{data:a.state}).then((function(e){dt.setState({emptyDescriptionBox:!0}),dt.state.makeBoxEmptyFunction(),a.getAllComments()})).catch((function(e){console.info("Problem with submitting your comment!")}))},a.makeEmpty=function(e){dt.setState({makeBoxEmptyFunction:e})},a.state={commentText:"",caseId:e.caseNumber,userType:"U",buttonDisabled:!0,commentComponentArray:[],emptyDescriptionBox:!1,makeBoxEmptyFunction:""},dt=Object(b.a)(a),a.getAllComments(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("br",null),this.state.commentComponentArray.map((function(e,t){return o.a.createElement("div",{key:t},e)})),o.a.createElement("br",null),o.a.createElement(ge,{passMakeEmpty:this.makeEmpty,emptyBox:this.state.emptyDescriptionBox,updateDescription:dt.setDescription}),o.a.createElement(v.a,{onClick:function(){return e.handleSubmit()},color:"primary",disabled:this.state.buttonDisabled,style:{fontSize:"15px",fontWeight:"bold"}},"Submit"))}}]),t}(o.a.Component),wt=(a(376),Object(H.a)({root:{maxWidth:700},media:{height:140},mediaMap:{height:200},headerTextColor:{color:"white"}}));function jt(e){var t=wt(),a="https://maps.googleapis.com/maps/api/staticmap?size=512x512&format=png&style=feature:road.highway%7Celement:geometry%7Cvisibility:simplified%7Ccolor:0xc280e9&style=feature:transit.line%7Cvisibility:simplified%7Ccolor:0xbababa&style=feature:road.highway%7Celement:labels.text.stroke%7Cvisibility:on%7Ccolor:0xb06eba&style=feature:road.highway%7Celement:labels.text.fill%7Cvisibility:on%7Ccolor:0xffffff&visible="+e.data.latitude+","+e.data.longitude+"&markers=color:red%7Clabel:A%7C"+e.data.latitude+","+e.data.longitude+"&key=AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ&zoom=15";return o.a.createElement(me.a,{style:{border:"2px solid rgba(255,255,255,0.1)"},className:t.root},o.a.createElement(de.a,{className:t.media,image:e.data.imageURL}),o.a.createElement(pe.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"}),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},o.a.createElement(C.a,{gutterBottom:!0},o.a.createElement(bt.a,null),"\xa0 \xa0 ",e.data.dateTime),o.a.createElement("br",null),o.a.createElement(C.a,{gutterBottom:!0},o.a.createElement(yt.a,null),"\xa0 \xa0 ",e.data.fullLocation),o.a.createElement("br",null),o.a.createElement(St,{text:"Severity Rate",marginBottom:"40px",color:t.headerTextColor.color}),o.a.createElement(xt,{value:e.data.severity}),o.a.createElement("br",null),o.a.createElement(St,{text:"Status",marginBottom:"15px",color:t.headerTextColor.color}),o.a.createElement(pt,{stepNumber:e.data.stepNumber}),o.a.createElement("p",{style:{marginTop:"120px",textAlign:"justify"}},o.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),o.a.createElement(St,{text:"Complaint Description",marginBottom:"15px",color:t.headerTextColor.color}),e.data.fullDescription),o.a.createElement("br",null),o.a.createElement(de.a,{className:t.mediaMap,image:a}),o.a.createElement("br",null),o.a.createElement("hr",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}}),o.a.createElement(St,{text:"Comments",marginBottom:"15px",color:t.headerTextColor.color}),o.a.createElement(kt,{caseNumber:e.data.caseNumber}))))}function Lt(e){var t,a=o.a.useState(!1),n=Object(Y.a)(a,2),r=n[0],i=n[1],l=o.a.useState("paper"),c=Object(Y.a)(l,2),s=c[0],m=c[1],u=Object(ht.a)(),p=Object(gt.a)(u.breakpoints.down("lg")),d=function(){i(!1)},g=o.a.useRef(null);return o.a.useEffect((function(){if(r){var e=g.current;null!==e&&e.focus()}}),[r]),o.a.createElement("div",null,o.a.createElement(v.a,{className:e.buttonContentStyles,onClick:(t="paper",function(){i(!0),m(t)})},"View report"),o.a.createElement(he.a,{open:r,onClose:d,scroll:s,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",fullScreen:p},o.a.createElement(ye.a,{id:"scroll-dialog-title"},"Report # ",e.caseNumber),o.a.createElement(be.a,{dividers:"paper"===s},o.a.createElement(jt,{data:e})),o.a.createElement(fe.a,null,o.a.createElement(v.a,{onClick:d,color:"primary"},"Close"))))}var It=Object(Me.a)((function(e){var t,a=e.breakpoints,n=e.spacing;return{root:Object(ze.a)({margin:"auto",borderRadius:n(2),transition:"0.3s",boxShadow:"0px 14px 80px rgba(34, 35, 58, 0.2)",position:"relative",maxWidth:500,marginLeft:"auto",overflow:"initial",background:"#333",display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:n(2)},a.up("md"),{flexDirection:"row",paddingTop:n(2)}),media:(t={width:"88%",marginLeft:"auto",marginRight:"auto",marginTop:n(-3),height:0,paddingBottom:"48%",borderRadius:n(2),backgroundColor:"#fff",position:"relative"},Object(ze.a)(t,a.up("md"),{width:"100%",marginLeft:n(-3),marginTop:0,transform:"translateX(-8px)"}),Object(ze.a)(t,"&:after",{content:'" "',position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:n(2),opacity:.5}),t),content:{padding:24},cta:{marginTop:24,textTransform:"initial"}}})),Rt=Object(Me.a)((function(e){var t="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif";return{overline:{textTransform:"uppercase",letterSpacing:"1px",fontSize:12,marginBottom:"0.875em",display:"inline-block"},heading:{fontSize:20,fontWeight:"bold",marginBottom:"0.35em",fontFamily:t},body:{marginBottom:(0,e.spacing)(4),fontSize:"0.8rem",letterSpacing:"0.00938em",fontFamily:t,color:"#eeeeee"},button:{backgroundImage:"linear-gradient(147deg, #2997f7 0%, #2997f7 74%)",borderRadius:5,paddingLeft:24,paddingRight:24,color:"#ffffff",marginTop:"25px",float:"right"}}})),Tt=function(e){var t,n=It(),r=Rt(),i=Object(He.a)(),l=a(377)(e.dateTime,"mmm d, yyyy"),c=(t=e.status,console.log(t,"ROs"),"submitted"===t?0:"approved"===t?1:"working"===t?2:"completed"===t?3:"cancelled"===t?4:void 0);return o.a.createElement(me.a,{className:Object(Ve.a)(n.root,i.root)},o.a.createElement(de.a,{className:n.media,image:e.imageURL}),o.a.createElement(pe.a,null,o.a.createElement(Ze.a,{classes:r,overline:l,heading:e.location,body:e.description}),o.a.createElement(pt,{stepNumber:c}),o.a.createElement(Lt,{imageURL:e.imageURL,dateTime:l,location:e.location,fullDescription:e.fullDescription,fullLocation:e.fullLocation,stepNumber:c,severity:e.severity,caseNumber:e.caseNumber,latitude:e.latitude,longitude:e.longitude,buttonContentStyles:r.button})))},Dt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={dashboardData:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;M.a.post("https://spothole.ml:5000/api/reports",{data:{userId:this.props.userId}}).then((function(t){e.setState({dashboardData:t.data})})).catch((function(e){console.info("Unable to retrieve user report")}))}},{key:"render",value:function(){return o.a.createElement("div",{style:{marginTop:"100px"}},o.a.createElement("div",{style:{textAlign:"center",color:"#fff"}}," ",o.a.createElement("div",{style:{display:"inline-block",backgroundColor:"#333",color:"#fff",paddingLeft:"60px",paddingRight:"60px",paddingTop:"5px",paddingBottom:"5px",fontWeight:"bold",fontSize:"20px",border:"2px solid #333",borderRadius:"5px"}},"Number of Reports \xa0 [ ",this.state.dashboardData.length," ]")),o.a.createElement("br",null),o.a.createElement("br",null),0===this.state.dashboardData.length&&o.a.createElement("div",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px",marginTop:"150px",color:"#333"}}," ","No Reports yet. ",o.a.createElement("br",null)," Click the Floating Action Button ",o.a.createElement("br",null)," to start Reporting now."),o.a.createElement(Z.a,{container:!0,spacing:3},this.state.dashboardData.map((function(e){return o.a.createElement(Z.a,{key:e.case_id,item:!0,xs:12},o.a.createElement(Tt,{imageURL:e.imageURL,dateTime:e.created_date,fullLocation:e.location,fullDescription:e.description,location:e.location.length<27?e.location:e.location.substring(0,26)+" ...",description:e.description.lenght<150?e.description:e.description.substring(0,149)+" ...",status:e.status,severity:e.severity,caseNumber:e.case_id,latitude:e.latitude,longitude:e.longitude}),o.a.createElement("br",null),o.a.createElement("br",null))}))))}}]),t}(o.a.Component),Bt=a(106),Nt=a(78),Ft=Object(Bt.a)(Object(Bt.c)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDZBgT-uZYXzTSkTJbiDcYT4D_XYsS8aUQ&v=3.exp&libraries=geometry,drawing,places",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"400px"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})}),Object(Bt.d)((function(){return{isOpen:!1,infoIndex:null}}),{onToggleOpen:function(e){var t=e.isOpen;e.infoIndex;return function(e){return{isOpen:!t,infoIndex:e}}}}),Nt.withScriptjs,Nt.withGoogleMap,Object(Bt.b)({componentDidMount:function(){var e=this;(new google.maps.DirectionsService).route({origin:new google.maps.LatLng(parseFloat(this.props.startLat),parseFloat(this.props.startLng)),destination:new google.maps.LatLng(parseFloat(this.props.endLat),parseFloat(this.props.endLng)),travelMode:google.maps.TravelMode.DRIVING},(function(t,a){if(a===google.maps.DirectionsStatus.OK){var n=e,o=[];M.a.post("https://spothole.ml:5000/api/reports/all").then((function(a){a.data.forEach((function(e,a){google.maps.geometry.poly.isLocationOnEdge(new google.maps.LatLng(e.latitude,e.longitude),new google.maps.Polyline({path:t.routes[0].overview_path}),.001)&&o.push(e)})),n.setState({directions:t,selectedReports:o}),e.props.manageCounts(o.length,t.routes[0].legs[0].duration.text+" ("+t.routes[0].legs[0].distance.text+")",7)}))}else console.info("Error Fetching Directions")}))}}))((function(e){return o.a.createElement(Nt.GoogleMap,{defaultZoom:8,defaultCenter:{lat:parseFloat(e.centerLat),lng:parseFloat(e.centerLng)}},e.directions&&o.a.createElement(Nt.DirectionsRenderer,{directions:e.directions}),e.selectedReports.map((function(t,a){var n;n=parseInt(t.severity)<=3?"https://i.ibb.co/2dzSbjJ/output-onlinepngtools-2.png":parseInt(t.severity)<=6?"https://i.ibb.co/RC2LmDh/output-onlinepngtools-1.png":"https://i.ibb.co/kMZV43H/output-onlinepngtools.png";var r=new window.google.maps.MarkerImage(n,null,null,null,new window.google.maps.Size(48,48));return o.a.createElement(Nt.Marker,{icon:r,key:a,position:{lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},onClick:function(){return e.onToggleOpen(a)}},e.isOpen&&e.infoIndex===a&&o.a.createElement(Nt.InfoWindow,{onCloseClick:e.onToggleOpen,key:a,visible:!0},o.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"3px",marginRight:"3px"}},o.a.createElement("div",{style:{color:"#212121",paddingRight:"10px",paddingBottom:"10px",fontWeight:"bold",lineHeight:1.5}},"Reported On: ",t.created_date.split(" ")[0],o.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Current Status:"," ",t.status.charAt(0).toUpperCase()+t.status.slice(1),o.a.createElement("hr",{style:{marginTop:"3px",marginBottom:"3px"}}),"Reported Severity: ",t.severity,"/10"," "),o.a.createElement("div",null,o.a.createElement("img",{src:t.imageURL,width:"200px",style:{border:"2px solid black",borderRadius:"10px",marginRight:"10px",marginBottom:"10px"},alt:"Validated Pothole"})))))})))})),At=a(651),Ut=a(650),Pt=a(640),zt=a(282),Mt=a.n(zt),Wt=a(283),Yt=a.n(Wt),_t=a(143),qt=a.n(_t),Gt=Object(H.a)({root:{flexGrow:1,maxWidth:600,borderRadius:"3px",border:"1px SOLID #212121",marginBottom:"10px"}});function Vt(e){var t=Gt();return o.a.createElement("center",null,o.a.createElement(S.a,{square:!0,className:t.root},o.a.createElement(Ut.a,{value:0,indicatorColor:"#333",textColor:"#fff",centered:!0},o.a.createElement(Pt.a,{icon:o.a.createElement(Mt.a,{color:"primary"}),label:e.totalCount+" Pothole(s)",disabled:!0}),o.a.createElement(Pt.a,{icon:o.a.createElement(Yt.a,{color:"primary"}),label:e.eta,disabled:!0}))),o.a.createElement(S.a,{square:!0,className:t.root},o.a.createElement(Ut.a,{value:0,indicatorColor:"#333",textColor:"#fff",centered:!0},o.a.createElement(Pt.a,{icon:o.a.createElement(qt.a,{style:{color:"#4747f4"}}),label:"Low Severity",disabled:!0}),o.a.createElement(Pt.a,{icon:o.a.createElement(qt.a,{style:{color:"orange"}}),label:"Medium Severity",disabled:!0}),o.a.createElement(Pt.a,{icon:o.a.createElement(qt.a,{style:{color:"red"}}),label:"High Severity",disabled:!0}))))}var Zt=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).setSourceLocation=function(e,t){a.setState({startAddress:e,startLat:t.lat,startLng:t.lng})},a.setDestinationLocation=function(e,t){a.setState({endAddress:e,endLat:t.lat,endLng:t.lng})},a.manageCounts=function(e,t,n){a.setState({counterIndicators:o.a.createElement(Vt,{totalCount:e,eta:t,lowSeverity:7,mediumSeverity:8,highSeverity:10})})},a.submitOrignDestination=function(){a.setState({map:"Loading ... "},(function(){""!==a.state.startLat&&""!==a.state.startLng&&""!==a.state.endLat&&""!==a.state.endLng?a.setState({map:o.a.createElement("div",{style:{border:"2px SOLID white",borderRadius:"5px",marginTop:"15px"}},o.a.createElement(Ft,{manageCounts:a.manageCounts,centerLat:"-34.397",centerLng:"150.644",startLat:a.state.startLat,startLng:a.state.startLng,endLat:a.state.endLat,endLng:a.state.endLng,selectedReports:a.state.selectedReports,directions:!0}))}):a.setState({map:o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement(At.a,{variant:"filled",severity:"info"},"This is an error alert \u2014 Cannot make map, try again!"))})}))},a.state={centerLat:"",centerLng:"",startLat:"",startLng:"",endLat:"",endLng:"",startAddress:"",endAddress:"",selectedReports:[],map:"",counterIndicators:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement(me.a,{className:t.root},o.a.createElement(pe.a,null,o.a.createElement(C.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Route It"),o.a.createElement(C.a,{variant:"body2",color:"textSecondary",component:"p"},"Use this to plan your travel, see the route to your destination and how severe it could be to travel. Also, monitor any route to see the progress for the reported pothole(s)."),o.a.createElement(oe,{label:"Source Location",updateLocation:this.setSourceLocation,currentLocationOptional:!0}),o.a.createElement(oe,{label:"Destination Location",updateLocation:this.setDestinationLocation,currentLocationOptional:!0}),o.a.createElement(v.a,{size:"large",color:"primary",onClick:function(){return e.submitOrignDestination()},className:t.buttonSubmit},"Get Route"),this.state.counterIndicators,this.state.map))}}]),t}(o.a.Component),Ht=Object(x.a)((function(e){return{root:{maxWidth:"100%",marginRight:"2%",marginLeft:"2%",marginTop:"100px",marginBottom:"30px"},buttonSubmit:{marginTop:"7px"},map:{border:"2px SOLID white",borderRadius:"5px"}}}))(Zt),Jt=a(284),Xt=a(657),Qt=a(641),Kt=a(642),$t=a(643),ea=a(622),ta=a(621),aa=a(285),na=a.n(aa),oa=a(286),ra=a.n(oa),ia=a(287),la=a.n(ia),ca=a(644),sa=a(288),ma=a.n(sa),ua=a(290),pa=a.n(ua),da=a(291),ga=a.n(da),ha=a(289),fa=a.n(ha),ba=a(645),Ea=a(646),ya=Object(H.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(Jt.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},inputRoot:{color:"inherit"},inputInput:Object(ze.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}}));function va(){var e=ya(),t=Object(ht.a)(),a=o.a.useState(!1),n=Object(Y.a)(a,2),r=n[0],i=n[1],l=function(){i(!1)};return o.a.createElement("div",{className:e.root},o.a.createElement(Qt.a,null),o.a.createElement(Kt.a,{position:"fixed",className:Object(Ve.a)(e.appBar,Object(ze.a)({},e.appBarShift,r))},o.a.createElement($t.a,null,o.a.createElement(ta.a,{color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},edge:"start",className:Object(Ve.a)(e.menuButton,r&&e.hide)},o.a.createElement(na.a,null)),o.a.createElement(C.a,{variant:"h5",noWrap:!0},"Spothole"))),o.a.createElement(Xt.a,{className:e.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:e.drawerPaper}},o.a.createElement("div",{className:e.drawerHeader},o.a.createElement(ta.a,{onClick:l},"ltr"===t.direction?o.a.createElement(ra.a,null):o.a.createElement(la.a,null))),o.a.createElement(Pe.a,null),o.a.createElement(ea.a,null,o.a.createElement(f.b,{to:"/report"},o.a.createElement(ca.a,{onClick:l,button:!0,key:"Report"},o.a.createElement(ba.a,null,o.a.createElement(te.a,{color:"primary"})),o.a.createElement(Ea.a,{primary:"Report Pothole"}))),o.a.createElement(f.b,{to:"/"},o.a.createElement(ca.a,{onClick:l,button:!0,key:"Dashboard"},o.a.createElement(ba.a,null,o.a.createElement(ma.a,{color:"primary"})),o.a.createElement(Ea.a,{primary:"My Complaints"}))),o.a.createElement(f.b,{to:"/routing"},o.a.createElement(ca.a,{onClick:l,button:!0,key:"Route Navigaton"},o.a.createElement(ba.a,null,o.a.createElement(fa.a,{color:"primary"})),o.a.createElement(Ea.a,{primary:"Route Navigation"}))),o.a.createElement(f.b,{to:"/profile"},o.a.createElement(ca.a,{onClick:l,button:!0,key:"Profile"},o.a.createElement(ba.a,null,o.a.createElement(pa.a,{color:"primary"})),o.a.createElement(Ea.a,{primary:"Profile"})))),o.a.createElement(f.b,{to:"/logout"},o.a.createElement(ca.a,{onClick:l,button:!0,key:"Logout"},o.a.createElement(ba.a,null,o.a.createElement(ga.a,{color:"primary"})),o.a.createElement(Ea.a,{primary:"Logout"})))))}var xa=a(293),Sa=a.n(xa),Ca=a(647),Oa=function(){return o.a.createElement("div",{style:{marginTop:"50px"}})},ka=a(292),wa=a.n(ka),ja=Object(H.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random?road)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),marginTop:"50px",backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:"50px",maxWidth:"250px",paddingTop:"15px",paddingBottom:"15px"}}}));function La(e){var t=ja();return o.a.createElement(Z.a,{container:!0,component:"main",className:t.root},o.a.createElement(Qt.a,null),o.a.createElement(Z.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),o.a.createElement(Z.a,{item:!0,xs:12,sm:8,md:5,component:S.a,elevation:6,square:!0,style:{backgroundImage:"url('https://images.unsplash.com/photo-1543839482-a95d35fc5a77?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=900&q=80'), linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6))",backgroundBlendMode:"overlay",borderLeft:"5px SOLID #212121"}},o.a.createElement("div",{className:t.paper},o.a.createElement(C.a,{component:"h1",variant:"h1",style:{marginTop:"100px"}},o.a.createElement("b",null,o.a.createElement(yt.a,{fontSize:"inherit"}))),o.a.createElement("br",null),o.a.createElement(C.a,{component:"h1",variant:"h3"},o.a.createElement("b",null,"Spothole")),o.a.createElement("br",null),o.a.createElement(C.a,{component:"h1",variant:"h5",style:{marginTop:"100px"}},o.a.createElement("b",null,"Sign In")),o.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return document.getElementsByClassName("abcRioButton")[0].click()}},o.a.createElement("b",null,"Sign In With Google \xa0",o.a.createElement(wa.a,null))))))}var Ia=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(m.a)(t).call(this,e))).callRender=function(e){window.gapi.load("signin2",(function(){var t={width:0,height:0,client_id:p,onsuccess:e,longTitle:!1,theme:"dark"};gapi.signin2.render("loginButton",t)}))},a.logout=function(e){a.state.isSignedIn?window.gapi.auth2.getAuthInstance().signOut().then((function(){a.setState({isSignedIn:a.auth2.isSignedIn.get()},(function(){localStorage.setItem("signedIn",!1),a.urlRedirect(e||"http://nirbhay.me/spothole")}))})):console.info("Already Signed In")},a.urlRedirect=function(e){var t=setTimeout((function(){return window.location.replace(e),!0}),300);return(window.location=e)||(window.location.href=e)?(clearTimeout(t),!0):(clearTimeout(t),window.location.replace(e),!0)},a.validateAndPostProfileData=function(e){M.a.post(g,{data:{emailId:e.getEmail()}}).then((function(t){"allowed"===t.data?M.a.post("https://spothole.ml:5000/api/profile/update",{data:{userId:e.getId(),emailId:e.getEmail(),name:e.getName(),photoURL:e.getImageUrl()}}):(a.logout(h),console.info("Unauthorized Login"))})).catch((function(e){a.logout(),console.info("Cannot login at this time!")}))},a.navigationBar=function(){return o.a.createElement("div",null," ",o.a.createElement(va,null),o.a.createElement(f.b,{to:"/report"},o.a.createElement(Ca.a,{color:"secondary","aria-label":"add",style:{position:"fixed",zIndex:1,right:0,bottom:0,marginRight:"25px",marginBottom:"25px"}},o.a.createElement(Sa.a,null))),o.a.createElement(Oa,null)," ")},a.isBlocked=function(){M.a.post(g,{data:{emailId:a.state.profileEmail}}).then((function(e){"allowed"!==e.data&&(a.logout(h),console.info("Unauthorized Login"))})).catch((function(e){a.logout(),console.info("Cannot login at this time!")}))},a.state={isSignedIn:!1,userId:"",profileName:"",profileEmail:"",profilePhotoURL:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.onSuccess.bind(this);window.gapi.load("auth2",(function(){e.auth2=gapi.auth2.init({client_id:p}),e.auth2.then((function(){var t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();e.setState({isSignedIn:e.auth2.isSignedIn.get(),userId:t.getId()||"",profileName:t.getName()||"",profileEmail:t.getEmail()||"",profilePhotoURL:t.getImageUrl()||""})}))})),this.callRender(t)}},{key:"onSuccess",value:function(){var e=this,t=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();localStorage.setItem("signedIn",!0),this.setState({isSignedIn:!0,err:null,userId:t.getId(),profileName:t.getName(),profileEmail:t.getEmail(),profilePhotoURL:t.getImageUrl()},(function(){e.validateAndPostProfileData(t)}))}},{key:"onLoginFailed",value:function(e){this.setState({isSignedIn:!1,error:e})}},{key:"loginStatus",value:function(){if("true"===localStorage.getItem("signedIn")&&this.state.isSignedIn)switch(this.isBlocked(),this.props.linkTo){case"/dashboard":return o.a.createElement("div",null,o.a.createElement(Dt,{userId:this.state.userId}),this.navigationBar());case"/report":return o.a.createElement("div",null,o.a.createElement(Fe,{userId:this.state.userId}),this.navigationBar());case"/logout":this.logout();break;case"/routing":return o.a.createElement("div",null,o.a.createElement(Ht,{userId:this.state.userId}),this.navigationBar());case"/profile":return o.a.createElement("div",null,o.a.createElement(Ge,{userId:this.state.userId,name:this.state.profileName,email:this.state.profileEmail,photoURL:this.state.profilePhotoURL}),this.navigationBar());case"/":default:return o.a.createElement("div",null,o.a.createElement(Dt,{userId:this.state.userId}),this.navigationBar())}else{if("false"!==localStorage.getItem("signedIn")||!this.state.isSignedIn)return"true"!==localStorage.getItem("signedIn")?o.a.createElement("div",null,o.a.createElement("div",{id:"loginButton",style:{display:"none"}},"Login with Google"),o.a.createElement(La,null)):o.a.createElement("div",null);this.urlRedirect("http://nirbhay.me/spothole")}}},{key:"render",value:function(){return o.a.createElement("div",null,this.loginStatus())}}]),t}(n.Component),Ra=a(72),Ta=(a(571),a(636)),Da=a(294),Ba=function(e){function t(e){return Object(l.a)(this,t),Object(s.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return window.location.href="https://nirbhay.me/spothole/404",o.a.createElement("div",null,"404")}}]),t}(o.a.Component),Na=Object(Da.a)({palette:{type:"dark",primary:{main:"#2997f7"},secondary:{main:"#ff0000"}},overrides:{MuiPaper:{root:{backgroundColor:"#333"}},MuiStepper:{root:{padding:"0px"}}}});var Fa=function(){return o.a.createElement(Ta.a,{theme:Na},o.a.createElement(f.a,null,o.a.createElement("div",null,o.a.createElement(Ra.c,null,o.a.createElement(Ra.a,{path:"/report",exact:!0},o.a.createElement(Ia,{linkTo:"/report"})),o.a.createElement(Ra.a,{path:"/profile",exact:!0},o.a.createElement(Ia,{linkTo:"/profile"})),o.a.createElement(Ra.a,{path:"/logout",exact:!0},o.a.createElement(Ia,{linkTo:"/logout"})),o.a.createElement(Ra.a,{path:"/routing",exact:!0},o.a.createElement(Ia,{linkTo:"/routing"})),o.a.createElement(Ra.a,{path:"/dashboard",exact:!0},o.a.createElement(Ia,{linkTo:"/dashboard"})),o.a.createElement(Ra.a,{path:"/",exact:!0},o.a.createElement(Ia,{linkTo:"/dashboard"})),o.a.createElement(Ra.a,{path:"*",exact:!0,component:Ba})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Fa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[321,1,2]]]);
//# sourceMappingURL=main.98b6c5f4.chunk.js.map